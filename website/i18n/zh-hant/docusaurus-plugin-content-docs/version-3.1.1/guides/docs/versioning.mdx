---
slug: /versioning
---

# ç‰ˆæœ¬æ§åˆ¶

æ‚¨å¯ä»¥ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ CLI åŸºæ–¼ `docs` ç›®éŒ„ä¸­çš„æœ€æ–°å…§å®¹å‰µå»ºæ–°çš„æ–‡æª”ç‰ˆæœ¬ã€‚è©²ç‰¹å®šæ–‡æª”é›†å°‡è¢«ä¿ç•™ä¸¦å¯è¨ªå•ï¼Œå³ä½¿ `docs` ç›®éŒ„ä¸­çš„æ–‡æª”æŒçºŒæ¼”é€²ã€‚

```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
```

:::warning

åœ¨é–‹å§‹å°æ–‡æª”é€²è¡Œç‰ˆæœ¬æ§åˆ¶ä¹‹å‰è«‹ä¸‰æ€â€”â€”é€™å¯èƒ½æœƒä½¿è²¢ç»è€…é›£ä»¥å”åŠ©æ”¹é€²æ–‡æª”ï¼

:::

å¤§å¤šæ•¸æƒ…æ³ä¸‹ï¼Œæ‚¨ä¸éœ€è¦ç‰ˆæœ¬æ§åˆ¶ï¼Œå› ç‚ºé€™åªæœƒå¢åŠ æ§‹å»ºæ™‚é–“ï¼Œä¸¦ç‚ºä»£ç¢¼åº«å¼•å…¥è¤‡é›œæ€§ã€‚ç‰ˆæœ¬æ§åˆ¶**æœ€é©åˆæ–‡æª”æµé‡é«˜ä¸”ç‰ˆæœ¬é–“æ–‡æª”è®ŠåŒ–è¿…é€Ÿçš„ç¶²ç«™**ã€‚å¦‚æœæ‚¨çš„æ–‡æª”å¾ˆå°‘è®Šæ›´ï¼Œè«‹å‹¿ç‚ºæ–‡æª”æ·»åŠ ç‰ˆæœ¬æ§åˆ¶ã€‚

è¦æ›´å¥½åœ°ç†è§£ç‰ˆæœ¬æ§åˆ¶çš„å·¥ä½œåŸç†ä¸¦åˆ¤æ–·å…¶æ˜¯å¦é©åˆæ‚¨çš„éœ€æ±‚ï¼Œæ‚¨å¯ä»¥ç¹¼çºŒé–±è®€ä¸‹æ–‡ã€‚

## æ¦‚è¿° {#overview}

å…¸å‹çš„ç‰ˆæœ¬åŒ–æ–‡æª”ç¶²ç«™çµæ§‹å¦‚ä¸‹ï¼š

```bash
website
â”œâ”€â”€ sidebars.json        # sidebar for the current docs version
â”œâ”€â”€ docs                 # docs directory for the current docs version
â”‚   â”œâ”€â”€ foo
â”‚   â”‚   â””â”€â”€ bar.md       # https://mysite.com/docs/next/foo/bar
â”‚   â””â”€â”€ hello.md         # https://mysite.com/docs/next/hello
â”œâ”€â”€ versions.json        # file to indicate what versions are available
â”œâ”€â”€ versioned_docs
â”‚   â”œâ”€â”€ version-1.1.0
â”‚   â”‚   â”œâ”€â”€ foo
â”‚   â”‚   â”‚   â””â”€â”€ bar.md   # https://mysite.com/docs/foo/bar
â”‚   â”‚   â””â”€â”€ hello.md
â”‚   â””â”€â”€ version-1.0.0
â”‚       â”œâ”€â”€ foo
â”‚       â”‚   â””â”€â”€ bar.md   # https://mysite.com/docs/1.0.0/foo/bar
â”‚       â””â”€â”€ hello.md
â”œâ”€â”€ versioned_sidebars
â”‚   â”œâ”€â”€ version-1.1.0-sidebars.json
â”‚   â””â”€â”€ version-1.0.0-sidebars.json
â”œâ”€â”€ docusaurus.config.js
â””â”€â”€ package.json
```

`versions.json` æ–‡ä»¶æ˜¯ä¸€å€‹ç‰ˆæœ¬åç¨±åˆ—è¡¨ï¼ŒæŒ‰å¾æ–°åˆ°èˆŠçš„é †åºæ’åˆ—ã€‚

ä¸‹è¡¨è§£é‡‹äº†ç‰ˆæœ¬åŒ–æ–‡ä»¶å¦‚ä½•æ˜ å°„åˆ°å…¶ç‰ˆæœ¬åŠç”Ÿæˆçš„ URLã€‚

| Path                                    | Version        | URL               |
| --------------------------------------- | -------------- | ----------------- |
| `versioned_docs/version-1.0.0/hello.md` | 1.0.0          | /docs/1.0.0/hello |
| `versioned_docs/version-1.1.0/hello.md` | 1.1.0 (latest) | /docs/hello       |
| `docs/hello.md`                         | current        | /docs/next/hello  |

:::tip

`docs` ç›®éŒ„ä¸­çš„æ–‡ä»¶å±¬æ–¼ `current` æ–‡æª”ç‰ˆæœ¬ã€‚

é»˜èªæƒ…æ³ä¸‹ï¼Œ`current` æ–‡æª”ç‰ˆæœ¬æ¨™è¨˜ç‚º `Next` ä¸¦æ‰˜ç®¡åœ¨ `/docs/next/*` ä¸‹ï¼Œä½†å®Œå…¨å¯ä»¥æ ¹æ“šé …ç›®çš„ç™¼å¸ƒé€±æœŸé€²è¡Œé…ç½®ã€‚

:::

### è¡“èª {#terminology}

è«‹æ³¨æ„æ­¤è™•ä½¿ç”¨çš„è¡“èªã€‚

<dl>
  <dt>
    <b>Current version</b>
  </dt>
  <dd>
    {'The version placed in the '}
    <code>./docs</code>
    {' folder.'}
  </dd>
  <dt>
    <b>Latest version / last version</b>
  </dt>
  <dd>
    {'The version served by default for docs navbar items. Usually has path '}
    <code>/docs</code>
    {'.'}
  </dd>
</dl>

ç•¶å‰ç‰ˆæœ¬ç”±**æ–‡ä»¶ç³»çµ±ä½ç½®**å®šç¾©ï¼Œè€Œæœ€æ–°ç‰ˆæœ¬ç”±**å°èˆªè¡Œç‚º**å®šç¾©ã€‚å®ƒå€‘å¯èƒ½æ˜¯ä¹Ÿå¯èƒ½ä¸æ˜¯åŒä¸€å€‹ç‰ˆæœ¬ï¼ï¼ˆå¦‚ä¸Šè¡¨æ‰€ç¤ºçš„é»˜èªé…ç½®æœƒå°‡å®ƒå€‘è¦–ç‚ºä¸åŒï¼šç•¶å‰ç‰ˆæœ¬åœ¨ `/docs/next`ï¼Œæœ€æ–°ç‰ˆæœ¬åœ¨ `/docs`ã€‚ï¼‰

## æ•™ç¨‹ {#tutorials}

### æ¨™è¨˜æ–°ç‰ˆæœ¬ {#tagging-a-new-version}

1. é¦–å…ˆï¼Œç¢ºä¿ç•¶å‰æ–‡æª”ç‰ˆæœ¬ï¼ˆ`./docs` ç›®éŒ„ï¼‰å·²æº–å‚™å¥½è¢«å‡çµã€‚
2. è¼¸å…¥æ–°çš„ç‰ˆæœ¬è™Ÿã€‚

```bash npm2yarn
npm run docusaurus docs:version 1.1.0
```

æ¨™è¨˜æ–°ç‰ˆæœ¬æ™‚ï¼Œæ–‡æª”ç‰ˆæœ¬æ§åˆ¶æ©Ÿåˆ¶å°‡ï¼š

- å°‡å®Œæ•´çš„ `docs/` æ–‡ä»¶å¤¾å…§å®¹è¤‡è£½åˆ°æ–°çš„ `versioned_docs/version-[versionName]/` æ–‡ä»¶å¤¾ä¸­ã€‚
- æ ¹æ“šç•¶å‰[å´é‚Šæ¬„](./sidebar/index.mdx)é…ç½®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰å‰µå»ºç‰ˆæœ¬åŒ–å´é‚Šæ¬„æ–‡ä»¶â€”â€”ä¿å­˜ç‚º `versioned_sidebars/version-[versionName]-sidebars.json`ã€‚
- å°‡æ–°ç‰ˆæœ¬è™Ÿè¿½åŠ åˆ° `versions.json` ä¸­ã€‚

### å‰µå»ºæ–°æ–‡æª” {#creating-new-docs}

1. å°‡æ–°æ–‡ä»¶æ”¾å…¥å°æ‡‰çš„ç‰ˆæœ¬æ–‡ä»¶å¤¾ä¸­ã€‚
2. æ ¹æ“šç‰ˆæœ¬è™Ÿåœ¨å°æ‡‰çš„å´é‚Šæ¬„æ–‡ä»¶ä¸­åŒ…å«å°æ–°æ–‡ä»¶çš„å¼•ç”¨ã€‚

```mdx-code-block
<Tabs>
<TabItem value="Current version structure">
```

```bash
# The new file.
docs/new.md

# Edit the corresponding sidebar file.
sidebars.js
```

```mdx-code-block
</TabItem>
<TabItem value="Older version structure">
```

```bash
# The new file.
versioned_docs/version-1.0.0/new.md

# Edit the corresponding sidebar file.
versioned_sidebars/version-1.0.0-sidebars.json
```

```mdx-code-block
</TabItem>
</Tabs>
```

### æ›´æ–°ç¾æœ‰ç‰ˆæœ¬ {#updating-an-existing-version}

æ‚¨å¯ä»¥åŒæ™‚æ›´æ–°å¤šå€‹æ–‡æª”ç‰ˆæœ¬ï¼Œå› ç‚º `versioned_docs/` ä¸­çš„æ¯å€‹ç›®éŒ„åœ¨ç™¼å¸ƒæ™‚éƒ½ä»£è¡¨ç‰¹å®šçš„è·¯ç”±ã€‚

1. ç·¨è¼¯ä»»ä½•æ–‡ä»¶ã€‚
2. æäº¤ä¸¦æ¨é€æ›´æ”¹ã€‚
3. å®ƒå°‡è¢«ç™¼å¸ƒåˆ°è©²ç‰ˆæœ¬ã€‚

ç¤ºä¾‹ï¼šç•¶æ‚¨æ›´æ”¹ `versioned_docs/version-2.6/` ä¸­çš„ä»»ä½•æ–‡ä»¶æ™‚ï¼Œåªæœƒå½±éŸ¿ç‰ˆæœ¬ `2.6` çš„æ–‡æª”ã€‚

### åˆªé™¤ç¾æœ‰ç‰ˆæœ¬ {#deleting-an-existing-version}

ä½ ä¹Ÿå¯ä»¥åˆªé™¤/ç§»é™¤ç‰ˆæœ¬ã€‚

1. å¾ `versions.json` ä¸­ç§»é™¤è©²ç‰ˆæœ¬ã€‚

ç¯„ä¾‹ï¼š

```diff
[
  "2.0.0",
  "1.9.0",
  // highlight-next-line
- "1.8.0"
]
```

2. åˆªé™¤ç‰ˆæœ¬åŒ–æ–‡ä»¶ç›®éŒ„ã€‚ç¯„ä¾‹ï¼š`versioned_docs/version-1.8.0`ã€‚
3. åˆªé™¤ç‰ˆæœ¬åŒ–å´é‚Šæ¬„æ–‡ä»¶ã€‚ç¯„ä¾‹ï¼š`versioned_sidebars/version-1.8.0-sidebars.json`ã€‚

## é…ç½®ç‰ˆæœ¬åŒ–è¡Œç‚º {#configuring-versioning-behavior}

ã€Œç•¶å‰ã€ç‰ˆæœ¬æ˜¯æŒ‡ `./docs` æ–‡ä»¶å¤¾çš„ç‰ˆæœ¬åç¨±ã€‚ç‰ˆæœ¬åŒ–ç®¡ç†æœ‰å¤šç¨®æ–¹å¼ï¼Œä½†å…©ç¨®å¸¸è¦‹çš„æ¨¡å¼æ˜¯ï¼š

- ä½ ç™¼å¸ƒäº† v1ï¼Œä¸¦ç«‹å³é–‹å§‹é–‹ç™¼ v2ï¼ˆåŒ…æ‹¬å…¶æ–‡æª”ï¼‰ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œ**ç•¶å‰ç‰ˆæœ¬**æ˜¯ v2ï¼Œä½æ–¼ `./docs` æºæ–‡ä»¶å¤¾ä¸­ï¼Œç”¨æˆ¶å¯ä»¥åœ¨ `example.com/docs/next` ç€è¦½ã€‚**æœ€æ–°ç‰ˆæœ¬**æ˜¯ v1ï¼Œä½æ–¼ `./versioned_docs/version-1` æºæ–‡ä»¶å¤¾ä¸­ï¼Œå¤§å¤šæ•¸ç”¨æˆ¶æœƒåœ¨ `example.com/docs` ç€è¦½ã€‚
- ä½ ç™¼å¸ƒäº† v1ï¼Œä¸¦æœƒç¶­è­·ä¸€æ®µæ™‚é–“æ‰æœƒè€ƒæ…® v2ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œ**ç•¶å‰ç‰ˆæœ¬**å’Œ**æœ€æ–°ç‰ˆæœ¬**éƒ½æœƒæŒ‡å‘ v1ï¼Œå› ç‚º v2 æ–‡æª”ç”šè‡³é‚„ä¸å­˜åœ¨ï¼

Docusaurus çš„é»˜èªè¨­ç½®éå¸¸é©åˆç¬¬ä¸€ç¨®ä½¿ç”¨å ´æ™¯ã€‚æˆ‘å€‘æœƒå°‡ç•¶å‰ç‰ˆæœ¬æ¨™è¨˜ç‚ºã€Œnextã€ï¼Œä½ ç”šè‡³å¯ä»¥é¸æ“‡ä¸ç™¼å¸ƒå®ƒã€‚

**å°æ–¼ç¬¬äºŒç¨®ä½¿ç”¨å ´æ™¯**ï¼šå¦‚æœä½ ç™¼å¸ƒäº† v1 ä¸¦ä¸”ä¸æ‰“ç®—å¾ˆå¿«é–‹ç™¼ v2ï¼Œèˆ‡å…¶å°‡ v1 ç‰ˆæœ¬åŒ–ä¸¦éœ€è¦ç¶­è­·å…©å€‹æ–‡ä»¶å¤¾ï¼ˆ`./docs` + `./versioned_docs/version-1.0.0`ï¼‰ä¸­çš„æ–‡æª”ï¼Œä½ å¯ä»¥è€ƒæ…®ã€Œå‡è£ã€ç•¶å‰ç‰ˆæœ¬æ˜¯ä¸€å€‹å·²åˆ‡å‰²çš„ç‰ˆæœ¬ï¼Œé€šéç‚ºå®ƒæŒ‡å®šè·¯å¾‘å’Œæ¨™ç±¤ï¼š

```js title="docusaurus.config.js"
export default {
  presets: [
    '@docusaurus/preset-classic',
    docs: {
      // highlight-start
      lastVersion: 'current',
      versions: {
        current: {
          label: '1.0.0',
          path: '1.0.0',
        },
      },
      // highlight-end
    },
  ],
};
```

`./docs` ä¸­çš„æ–‡æª”å°‡åœ¨ `/docs/1.0.0` è€Œé `/docs/next` æä¾›ï¼Œ`1.0.0` å°‡æˆç‚ºæˆ‘å€‘åœ¨å°èˆªæ¬„ä¸‹æ‹‰èœå–®ä¸­é€£çµçš„é»˜èªç‰ˆæœ¬ï¼Œè€Œä½ åªéœ€è¦ç¶­è­·å–®ä¸€çš„ `./docs` æ–‡ä»¶å¤¾ã€‚

æˆ‘å€‘æä¾›ä»¥ä¸‹æ’ä»¶é¸é …ä¾†è‡ªå®šç¾©ç‰ˆæœ¬åŒ–è¡Œç‚ºï¼š

- `disableVersioning`ï¼šå³ä½¿æœ‰ç‰ˆæœ¬ä¹Ÿæ˜ç¢ºç¦ç”¨ç‰ˆæœ¬åŒ–ã€‚é€™å°‡ä½¿ç¶²ç«™åƒ…åŒ…å«ç•¶å‰ç‰ˆæœ¬ã€‚
- `includeCurrentVersion`ï¼šåŒ…å«ç•¶å‰ç‰ˆæœ¬ï¼ˆ`./docs` æ–‡ä»¶å¤¾ï¼‰çš„æ–‡æª”ã€‚
  - **æç¤º**ï¼šå¦‚æœç•¶å‰ç‰ˆæœ¬æ˜¯é€²è¡Œä¸­çš„å·¥ä½œï¼Œå°šæœªæº–å‚™å¥½ç™¼å¸ƒï¼Œå¯ä»¥é—œé–‰æ­¤é¸é …ã€‚
- `lastVersion`ï¼šè¨­ç½®ã€Œæœ€æ–°ç‰ˆæœ¬ã€ï¼ˆ`/docs` è·¯ç”±ï¼‰æŒ‡å‘å“ªå€‹ç‰ˆæœ¬ã€‚
  - **æç¤º**ï¼š`lastVersion: 'current'` é©ç”¨æ–¼ç•¶å‰ç‰ˆæœ¬æŒ‡å‘ä¸€å€‹ä¸æ–·ä¿®è£œå’Œç™¼å¸ƒçš„ä¸»è¦ç‰ˆæœ¬ã€‚æœ€æ–°ç‰ˆæœ¬çš„å¯¦éš›è·¯ç”±åŸºç¤è·¯å¾‘å’Œæ¨™ç±¤æ˜¯å¯é…ç½®çš„ã€‚
- `onlyIncludeVersions`ï¼šå®šç¾©å¾ `versions.json` ä¸­éƒ¨ç½²çš„ç‰ˆæœ¬å­é›†ã€‚
  - **æç¤º**ï¼šåœ¨é–‹ç™¼å’Œéƒ¨ç½²é è¦½ä¸­é™åˆ¶ç‚º 2 æˆ– 3 å€‹ç‰ˆæœ¬ï¼Œä»¥æé«˜å•Ÿå‹•å’Œæ§‹å»ºæ™‚é–“ã€‚
- `versions`ï¼šç‰ˆæœ¬å…ƒæ•¸æ“šçš„å­—å…¸ã€‚å°æ–¼æ¯å€‹ç‰ˆæœ¬ï¼Œä½ å¯ä»¥è‡ªå®šç¾©ä»¥ä¸‹å…§å®¹ï¼š
  - `label`ï¼šåœ¨ç‰ˆæœ¬ä¸‹æ‹‰èœå–®å’Œæ©«å¹…ä¸­é¡¯ç¤ºçš„æ¨™ç±¤ã€‚
  - `path`ï¼šè©²ç‰ˆæœ¬çš„è·¯ç”±åŸºç¤è·¯å¾‘ã€‚é»˜èªæƒ…æ³ä¸‹ï¼Œæœ€æ–°ç‰ˆæœ¬ç‚º `/`ï¼Œç•¶å‰ç‰ˆæœ¬ç‚º `/next`ã€‚
  - `banner`ï¼šå¯ä»¥æ˜¯ `'none'`ã€`'unreleased'` æˆ– `'unmaintained'`ã€‚æ±ºå®šåœ¨æ¯å€‹æ–‡æª”é é¢é ‚éƒ¨é¡¯ç¤ºçš„å…§å®¹ã€‚ä»»ä½•é«˜æ–¼æœ€æ–°ç‰ˆæœ¬çš„ç‰ˆæœ¬å°‡æ¨™è¨˜ç‚ºã€Œunreleasedã€ï¼Œä½æ–¼çš„å‰‡æ¨™è¨˜ç‚ºã€Œunmaintainedã€ã€‚
  - `badge`ï¼šåœ¨è©²ç‰ˆæœ¬æ–‡æª”çš„é ‚éƒ¨é¡¯ç¤ºå¸¶æœ‰ç‰ˆæœ¬åç¨±çš„å¾½ç« ã€‚
  - `className`ï¼šç‚ºè©²ç‰ˆæœ¬æ–‡æª”é é¢çš„ `<html>` å…ƒç´ æ·»åŠ è‡ªå®šç¾© `className`ã€‚

è©³è¦‹[æ–‡æª”æ’ä»¶é…ç½®](../../api/plugins/plugin-content-docs.mdx#configuration)ã€‚

## å°èˆªæ¬„é …ç›® {#navbar-items}

æˆ‘å€‘æä¾›å¤šç¨®å°èˆªæ¬„é …ç›®ï¼Œå¹«åŠ©ä½ å¿«é€Ÿè¨­ç½®å°èˆªï¼Œç„¡éœ€æ“”å¿ƒç‰ˆæœ¬åŒ–è·¯ç”±ã€‚

- [`doc`](../../api/themes/theme-configuration.mdx#navbar-doc-link): a link to a doc.
- [`docSidebar`](../../api/themes/theme-configuration.mdx#navbar-doc-sidebar): a link to the first item in a sidebar.
- [`docsVersion`](../../api/themes/theme-configuration.mdx#navbar-docs-version): a link to the main doc of the currently viewed version.
- [`docsVersionDropdown`](../../api/themes/theme-configuration.mdx#navbar-docs-version-dropdown): a dropdown containing all the versions available.

These links would all look for an appropriate version to link to, in the following order:

1. **Active version**: the version that the user is currently browsing, if she is on a page provided by this doc plugin. If she's not on a doc page, fall back to...
2. **Preferred version**: the version that the user last viewed. If there's no history, fall back to...
3. **Latest version**: the default version that we navigate to, configured by the `lastVersion` option.

## Recommended practices {#recommended-practices}

### Version your documentation only when needed {#version-your-documentation-only-when-needed}

For example, you are building documentation for your npm package `foo` and you are currently in version 1.0.0. You then release a patch version for a minor bug fix and it's now 1.0.1.

Should you cut a new documentation version 1.0.1? **You probably shouldn't**. 1.0.1 and 1.0.0 docs shouldn't differ according to semver because there are no new features!. Cutting a new version for it will only just create unnecessary duplicated files.

### Keep the number of versions small {#keep-the-number-of-versions-small}

As a good rule of thumb, try to keep the number of your versions below 10. You will **very likely** to have a lot of obsolete versioned documentation that nobody even reads anymore. For example, [Jest](https://jestjs.io/versions) is currently in version `27.4`, and only maintains several latest documentation versions with the lowest being `25.X`. Keep it small ğŸ˜Š

:::tip[archive older versions]

If you deploy your site on a Jamstack provider (e.g. [Netlify](../../deployment.mdx)), the provider will save each production build as a snapshot under an immutable URL. You can include archived versions that will never be rebuilt as external links to these immutable URLs. The Jest website and the Docusaurus website both use such pattern to keep the number of actively built versions low.

:::

### Use absolute import within the docs {#use-absolute-import-within-the-docs}

Don't use relative paths import within the docs. Because when we cut a version the paths no longer work (the nesting level is different, among other reasons). You can utilize the `@site` alias provided by Docusaurus that points to the `website` directory. Example:

```diff
- import Foo from '../src/components/Foo';
+ import Foo from '@site/src/components/Foo';
```

### Link docs by file paths {#link-docs-by-file-paths}

Refer to other docs by relative file paths with the `.md` extension, so that Docusaurus can rewrite them to actual URL paths during building. Files will be linked to the correct corresponding version.

```md
The [@hello](hello.mdx#paginate) document is great!

See the [Tutorial](../getting-started/tutorial.mdx) for more info.
```

### Global or versioned collocated assets {#global-or-versioned-collocated-assets}

You should decide if assets like images and files are per-version or shared between versions.

If your assets should be versioned, put them in the docs version, and use relative paths:

```md
![img alt](./myImage.png)

[download this file](./file.pdf)
```

If your assets are global, put them in `/static` and use absolute paths:

```md
![img alt](/myImage.png)

[download this file](/file.pdf)
```
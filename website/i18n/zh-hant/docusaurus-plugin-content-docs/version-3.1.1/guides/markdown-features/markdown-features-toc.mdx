---
id: toc
description: Customizing headings and table-of-contents in Markdown
slug: /markdown-features/toc
---

import BrowserWindow from '@site/src/components/BrowserWindow';

# 標題與目錄

## Markdown 標題 {#markdown-headings}

您可以使用標準的 Markdown 標題語法。

```md
## Level 2 title

### Level 3 title

#### Level 4 title
```

每個 Markdown 標題都會自動生成對應的目錄條目。

### 標題 ID {#heading-ids}

每個標題都有一個可自動生成或手動指定的 ID。標題 ID 允許您透過 Markdown 或 JSX 連結到特定章節：

```md
[link](#heading-id)
```

```jsx
<Link to="#heading-id">link</Link>
```

預設情況下，Docusaurus 會根據標題文字自動生成 ID。例如 `### Hello World` 會生成 ID `hello-world`。

自動生成的 ID 存在以下限制：

- 生成的 ID 可能不夠美觀
- 當您需要變更或翻譯標題文字時，可能希望保留原有 ID

您可以使用特殊的 Markdown 語法手動指定標題 ID：

```mdx-code-block
<Code language="md">{'### Hello World \u007B#my-explicit-id}\n'}</Code>
```

:::tip

使用 **[`write-heading-ids`](../../cli.mdx#docusaurus-write-heading-ids-sitedir)** CLI 命令可為所有 Markdown 文件添加明確的標題 ID。

:::

:::warning[避免 ID 衝突]

自動生成的標題 ID 在單一頁面中會保持唯一性，但若使用自訂 ID，請確保每個 ID 在頁面中只出現一次，否則會導致多個 DOM 元素共用相同 ID，這違反 HTML 語義規範，並會使其中一個標題無法被連結。

:::

## 目錄標題層級 {#table-of-contents-heading-level}

每個 Markdown 文件右上角會顯示目錄。預設情況下，目錄僅顯示 h2 和 h3 級別的標題，這通常足以呈現頁面結構。如需調整顯示的標題層級範圍，您可以針對單一頁面或全局設定最小和最大標題層級。

若要設定特定頁面的標題層級，可使用 front matter 中的 `toc_min_heading_level` 和 `toc_max_heading_level` 參數。

```md title="myDoc.md"
---
# Display h2 to h5 headings
toc_min_heading_level: 2
toc_max_heading_level: 5
---
```

若要為所有頁面設定標題層級，請使用 [`themeConfig.tableOfContents`](../../api/themes/theme-configuration.mdx#table-of-contents) 選項。

```js title="docusaurus.config.js"
export default {
  themeConfig: {
    tableOfContents: {
      // highlight-start
      minHeadingLevel: 2,
      maxHeadingLevel: 5,
      // highlight-end
    },
  },
};
```

即使已設定全局選項，仍可透過 front matter 在單一頁面中覆寫設定。

:::note

`themeConfig` 選項會影響網站上所有目錄（包含[行內目錄](#inline-table-of-contents)），而 front matter 選項僅影響右上角的目錄。如需自訂每個 `<TOCInline />` 元件，需使用 `minHeadingLevel` 和 `maxHeadingLevel` 屬性。

:::

## 行內目錄 {#inline-table-of-contents}

透過 MDX 功能，您也可以在 Markdown 文件中直接嵌入行內目錄。

MDX 文件中可透過 `toc` 變數取得所有標題資訊。預設僅顯示 `h2` 和 `h3` 級別標題。您可透過為個別 `TOCInline` 元件設定 `minHeadingLevel` 或 `maxHeadingLevel` 來調整顯示的標題層級範圍。

```jsx
import TOCInline from '@theme/TOCInline';

<TOCInline toc={toc} />
```

```mdx-code-block
import TOCInline from '@theme/TOCInline';

<BrowserWindow>
<TOCInline toc={toc} />
</BrowserWindow>
```

`toc` 全局變數是一個標題項目的陣列：

```ts
declare const toc: {
  value: string;
  id: string;
  level: number;
}[];
```

請注意 `toc` 全局變數是扁平化陣列，因此您可以輕鬆過濾不需要的節點或插入額外節點，重新組織目錄樹狀結構。

```jsx
import TOCInline from '@theme/TOCInline';

<TOCInline
  // Only show h2 and h4 headings
  toc={toc.filter((node) => node.level === 2 || node.level === 4)}
  minHeadingLevel={2}
  // Show h4 headings in addition to the default h2 and h3 headings
  maxHeadingLevel={4}
/>
```

```mdx-code-block
<BrowserWindow>
<TOCInline
  toc={toc.filter((node) => node.level === 2 || node.level === 4)}
  minHeadingLevel={2}
  maxHeadingLevel={4}
/>
</BrowserWindow>
```

## Customizing table of contents generation {#customizing-table-of-contents-generation}

The table-of-contents is generated by parsing the Markdown source with a [Remark plugin](./markdown-features-plugins.mdx). There are known edge-cases where it generates false-positives and false-negatives.

Markdown headings within hideable areas will still show up in the TOC. For example, headings within [`Tabs`](./markdown-features-tabs.mdx) and [`details`](./markdown-features-intro.mdx#details) will not be excluded.

Non-Markdown headings will not show up in the TOC. This can be used to your advantage to tackle the aforementioned issue.

```md
<details>
<summary>Some details containing headings</summary>
<h2 id="#heading-id">I'm a heading that will not show up in the TOC</h2>

Some content...

</details>
```

The ability to ergonomically insert extra headings or ignore certain headings is a work-in-progress. If this feature is important to you, please report your use-case in [this issue](https://github.com/facebook/docusaurus/issues/6201).

---

:::warning

Below is just some dummy content to have more table of contents items available on the current page.

:::

## Example Section 1 {#example-section-1}

Lorem ipsum

### Example Subsection 1 a {#example-subsection-1-a}

Lorem ipsum

#### Example subsubsection 1 a I

#### Example subsubsection 1 a II

#### Example subsubsection 1 a III

### Example Subsection 1 b {#example-subsection-1-b}

Lorem ipsum

#### Example subsubsection 1 b I

#### Example subsubsection 1 b II

#### Example subsubsection 1 b III

### Example Subsection 1 c {#example-subsection-1-c}

Lorem ipsum

#### Example subsubsection 1 c I

#### Example subsubsection 1 c II

#### Example subsubsection 1 c III

## Example Section 2 {#example-section-2}

Lorem ipsum

### Example Subsection 2 a {#example-subsection-2-a}

Lorem ipsum

#### Example subsubsection 2 a I

#### Example subsubsection 2 a II

#### Example subsubsection 2 a III

### Example Subsection 2 b {#example-subsection-2-b}

Lorem ipsum

#### Example subsubsection 2 b I

#### Example subsubsection 2 b II

#### Example subsubsection 2 b III

### Example Subsection 2 c {#example-subsection-2-c}

Lorem ipsum

#### Example subsubsection 2 c I

#### Example subsubsection 2 c II

#### Example subsubsection 2 c III

## Example Section 3 {#example-section-3}

Lorem ipsum

### Example Subsection 3 a {#example-subsection-3-a}

Lorem ipsum

#### Example subsubsection 3 a I

#### Example subsubsection 3 a II

#### Example subsubsection 3 a III

### Example Subsection 3 b {#example-subsection-3-b}

Lorem ipsum

#### 範例子小節 3 b I

#### 範例子小節 3 b II

#### 範例子小節 3 b III

### 範例小節 3 c {#example-subsection-3-c}

Lorem ipsum

#### 範例子小節 3 c I

#### 範例子小節 3 c II

#### 範例子小節 3 c III
---
keywords:
  - algolia
  - search
---

# Search

There are a few options you can use to add search to your website:

- ğŸ¥‡ [Algolia DocSearch](#using-algolia-docsearch) (**official**)
- ğŸ‘¥ [Typesense DocSearch](#using-typesense-docsearch)
- ğŸ‘¥ [Local Search](#using-local-search)
- ğŸ‘¥ [Your own `SearchBar` component](#using-your-own-search)

:::info

ğŸ¥‡ Docusaurus provides **first-class support** for [Algolia DocSearch](#using-algolia-docsearch).

ğŸ‘¥ Other options are **maintained by the community**: please report bugs to their respective repositories.

:::

## ğŸ¥‡ Using Algolia DocSearch {#using-algolia-docsearch}

Docusaurus has **official support** for [Algolia DocSearch](https://docsearch.algolia.com).

The service is **free** for any open-source project: just make sure to read the [checklist](https://docsearch.algolia.com/docs/who-can-apply/) and [apply to the DocSearch program](https://docsearch.algolia.com/apply).

DocSearch crawls your website once a week (the schedule is configurable from the web interface) and aggregates all the content in an Algolia index. This content is then queried directly from your front-end using the Algolia API.

If your website is [not eligible](https://docsearch.algolia.com/docs/who-can-apply) for the free, hosted version of DocSearch, or if your website sits behind a firewall and is not public, then you can [run your own](https://docsearch.algolia.com/docs/run-your-own/) DocSearch crawler.

:::note

By default, the Docusaurus preset generates a [sitemap.xml](https://docusaurus.io/sitemap.xml) that the Algolia crawler can use.

:::

:::info[From the old docsearch?]

You can read more about migration from the legacy DocSearch infra in [our blog post](/blog/2021/11/21/algolia-docsearch-migration) or [the DocSearch migration docs](https://docsearch.algolia.com/docs/migrating-from-legacy).

:::

### Index Configuration {#algolia-index-configuration}

After your application has been approved and deployed, you will receive an email with all the details for you to add DocSearch to your project. Editing and managing your crawls can be done via [the web interface](https://crawler.algolia.com/). Indices are readily available after deployment, so manual configuration usually isn't necessary.

:::tip

It is highly recommended to use a config similar to the [**Docusaurus v3 website config**](https://docsearch.algolia.com/docs/templates/#docusaurus-v2-template).

:::

### Connecting Algolia {#connecting-algolia}

Docusaurus' own `@docusaurus/preset-classic` supports Algolia DocSearch integration. If you use the classic preset, no additional installation is needed.

<details>
<summary>Installation steps when not using <code>@docusaurus/preset-classic</code></summary>

1. Install the package:

```bash npm2yarn
npm install --save @docusaurus/theme-search-algolia
```

2. Register the theme in `docusaurus.config.js`:

```js title="docusaurus.config.js"
export default {
  title: 'My site',
  // ...
  themes: ['@docusaurus/theme-search-algolia'],
  themeConfig: {
    // ...
  },
};
```

</details>

Then, add an `algolia` field in your `themeConfig`. **[Apply for DocSearch](https://docsearch.algolia.com/apply/)** to get your Algolia index and API key.

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      // The application ID provided by Algolia
      appId: 'YOUR_APP_ID',

      // Public API key: it is safe to commit it
      apiKey: 'YOUR_SEARCH_API_KEY',

      indexName: 'YOUR_INDEX_NAME',

      // Optional: see doc section below
      contextualSearch: true,

      // Optional: Specify domains where the navigation should occur through window.location instead on history.push. Useful when our Algolia config crawls multiple documentation sites and we want to navigate with window.location.href to them.
      externalUrlRegex: 'external\\.com|domain\\.com',

      // Optional: Replace parts of the item URLs from Algolia. Useful when using the same search index for multiple deployments using a different baseUrl. You can use regexp or string in the `from` param. For example: localhost:3000 vs myCompany.com/docs
      replaceSearchResultPathname: {
        from: '/docs/', // or as RegExp: /\/docs\//
        to: '/',
      },

      // Optional: Algolia search parameters
      searchParameters: {},

      // Optional: path for search page that enabled by default (`false` to disable it)
      searchPagePath: 'search',

      // Optional: whether the insights feature is enabled or not on Docsearch (`false` by default)
      insights: false,

      //... other Algolia params
    },
    // highlight-end
  },
};
```

:::info

The `searchParameters` option used to be named `algoliaOptions` in Docusaurus v1.

Refer to its [official DocSearch documentation](https://docsearch.algolia.com/docs/api#searchparameters) for possible values.

:::

:::warning

The search feature will not work reliably until Algolia crawls your site.

If search doesn't work after any significant change, please use the Algolia dashboard to **trigger a new crawl**.

:::

### Contextual search {#contextual-search}

ä¸Šä¸‹æ–‡æœå°‹åŠŸèƒ½**é è¨­ç‚ºå•Ÿç”¨ç‹€æ…‹**ã€‚

å®ƒèƒ½ç¢ºä¿æœå°‹çµæœ**èˆ‡ç•¶å‰èªè¨€å’Œç‰ˆæœ¬é«˜åº¦ç›¸é—œ**ã€‚

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: true,
    },
    // highlight-end
  },
};
```

å‡è¨­æ‚¨æœ‰2å€‹æ–‡ä»¶ç‰ˆæœ¬ï¼ˆ**v1**å’Œ**v2**ï¼‰åŠ2ç¨®èªè¨€ï¼ˆ`en`å’Œ`fr`ï¼‰ã€‚

ç•¶ç€è¦½v2æ–‡ä»¶æ™‚ï¼Œè‹¥å‡ºç¾v1ç‰ˆæœ¬çš„æœå°‹çµæœæœƒé¡¯å¾—çªå…€ã€‚æœ‰æ™‚v1èˆ‡v2æ–‡ä»¶å…§å®¹é«˜åº¦ç›¸ä¼¼ï¼Œå¯èƒ½å°è‡´ç›¸åŒæŸ¥è©¢å‡ºç¾é‡è¤‡çµæœï¼ˆæ¯å€‹ç‰ˆæœ¬å„å‡ºç¾ä¸€æ¬¡ï¼‰ã€‚

åŒç†ï¼Œåœ¨ç€è¦½æ³•èªç«™é»æ™‚ï¼Œè‹¥è¿”å›è‹±æ–‡æ–‡ä»¶çµæœä¹Ÿä¸ç¬¦åˆé æœŸã€‚

ç‚ºè§£æ±ºæ­¤å•é¡Œï¼Œä¸Šä¸‹æ–‡æœå°‹åŠŸèƒ½æœƒè‡ªå‹•è­˜åˆ¥æ‚¨ç•¶å‰ç€è¦½çš„æ–‡ä»¶ç‰ˆæœ¬èˆ‡èªè¨€ï¼Œä¸¦å‹•æ…‹ç”Ÿæˆå°æ‡‰çš„æœå°‹éæ¿¾æ¢ä»¶ã€‚

- åœ¨`/en/docs/v1/myDoc`é é¢æ™‚ï¼Œæœå°‹çµæœåƒ…åŒ…å«**v1**ç‰ˆæœ¬çš„**è‹±æ–‡**å…§å®¹ï¼ˆåŠå…¶ä»–æœªç‰ˆæœ¬åŒ–çš„é é¢ï¼‰
- åœ¨`/fr/docs/v2/myDoc`é é¢æ™‚ï¼Œæœå°‹çµæœåƒ…åŒ…å«**v2**ç‰ˆæœ¬çš„**æ³•æ–‡**å…§å®¹ï¼ˆåŠå…¶ä»–æœªç‰ˆæœ¬åŒ–çš„é é¢ï¼‰

:::info

ç•¶å•Ÿç”¨`contextualSearch: true`ï¼ˆé è¨­å€¼ï¼‰æ™‚ï¼Œä¸Šä¸‹æ–‡ç¯©é¸æ¢ä»¶æœƒèˆ‡`algolia.searchParameters.facetFilters`æä¾›çš„ç¯©é¸å™¨è‡ªå‹•åˆä½µã€‚

è‹¥æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¯ç¦ç”¨`contextualSearch`ä¸¦è‡ªå®šç¾©`facetFilters`ï¼š

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: false,
      searchParameters: {
        facetFilters: ['language:en', ['filter1', 'filter2'], 'filter3'],
      },
    },
    // highlight-end
  },
};
```

è©³è¦‹[Algoliaåˆ†é¢æœå°‹æ–‡ä»¶](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/)ã€‚

:::

### è‡ªè¨‚Algoliaæœå°‹æ¨£å¼ {#styling-your-algolia-search}

DocSearché è¨­æ¡ç”¨ç¬¦åˆç„¡éšœç¤™æ¨™æº–çš„ç²¾å¿ƒèª¿æ ¡ä¸»é¡Œï¼Œç¢ºä¿è‰²å½©èˆ‡å°æ¯”åº¦ç¬¦åˆè¦ç¯„ã€‚

æ‚¨ä»å¯é€éä¿®æ”¹`/src/css/custom.css`æª”æ¡ˆï¼Œä½¿ç”¨Docusaurusçš„[Infima CSSè®Šæ•¸](styling-layout.mdx#styling-your-site-with-infima)ä¾†èª¿æ•´DocSearchæ¨£å¼ã€‚

```css title="/src/css/custom.css"
[data-theme='light'] .DocSearch {
  /* --docsearch-primary-color: var(--ifm-color-primary); */
  /* --docsearch-text-color: var(--ifm-font-color-base); */
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(94, 100, 112, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-color-secondary-lighter);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-color-secondary);
  --docsearch-searchbox-focus-background: var(--ifm-color-white);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-white);
  /* Footer */
  --docsearch-footer-background: var(--ifm-color-white);
}

[data-theme='dark'] .DocSearch {
  --docsearch-text-color: var(--ifm-font-color-base);
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(47, 55, 69, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-background-color);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-background-color);
  --docsearch-searchbox-focus-background: var(--ifm-color-black);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-emphasis-100);
  /* Footer */
  --docsearch-footer-background: var(--ifm-background-surface-color);
  --docsearch-key-gradient: linear-gradient(
    -26.5deg,
    var(--ifm-color-emphasis-200) 0%,
    var(--ifm-color-emphasis-100) 100%
  );
}
```

### è‡ªè¨‚Algoliaæœå°‹è¡Œç‚º {#customizing-the-algolia-search-behavior}

Algolia DocSearchæ”¯æ´é€é`docusaurus.config.js`æª”æ¡ˆä¸­çš„`algolia`æ¬„ä½å‚³é[å¤šç¨®åƒæ•¸](https://docsearch.algolia.com/docs/api/)ã€‚

```js title="docusaurus.config.js"
export default {
  themeConfig: {
    // ...
    algolia: {
      apiKey: 'YOUR_API_KEY',
      indexName: 'YOUR_INDEX_NAME',
      // Options...
    },
  },
};
```

### ä¿®æ”¹Algoliaæœå°‹å…ƒä»¶ {#editing-the-algolia-search-component}

è‹¥éœ€ç›´æ¥ç·¨è¼¯Algoliaæœå°‹Reactå…ƒä»¶ï¼Œå¯å°`@docusaurus/theme-search-algolia`ä¸­çš„`SearchBar`å…ƒä»¶é€²è¡Œ[swizzle](swizzling.mdx)æ“ä½œï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-search-algolia SearchBar
```

### æŠ€è¡“æ”¯æ´ {#algolia-support}

Algolia DocSearchåœ˜éšŠå¯å”åŠ©è¨ºæ–·ç«™é»æœå°‹å•é¡Œã€‚

å¯é€é[é›»å­éƒµä»¶](mailto:documentationsearch@algolia.com)æˆ–[Discord](https://discord.gg/tXdr5mP)è¯ç¹«ä»–å€‘ã€‚

Docusaurusåœ¨[Discord](https://discordapp.com/invite/docusaurus)ä¸Šä¹Ÿè¨­æœ‰`#algolia`å°ˆå±¬é »é“ã€‚

## ğŸ‘¥ ä½¿ç”¨Typesense DocSearch {#using-typesense-docsearch}

[Typesense](https://typesense.org) DocSearché‹ä½œåŸç†èˆ‡Algolia DocSearchç›¸ä¼¼ï¼Œå·®ç•°åœ¨æ–¼ç¶²ç«™å…§å®¹æœƒè¢«ç´¢å¼•è‡³Typesenseæœå°‹å¢é›†ã€‚

Typesense æ˜¯ä¸€å€‹[é–‹æº](https://github.com/typesense/typesense)çš„å³æ™‚æœå°‹å¼•æ“ï¼Œæ‚¨å¯ä»¥é¸æ“‡ï¼š

- åœ¨è‡ªæœ‰ä¼ºæœå™¨ä¸Š[è‡ªè¡Œè¨—ç®¡](https://typesense.org/docs/latest/guide/install-typesense.html#option-2-local-machine-self-hosting)ï¼Œæˆ–
- ä½¿ç”¨è¨—ç®¡æœå‹™ [Typesense Cloud](https://cloud.typesense.org)ã€‚

èˆ‡ Algolia DocSearch é¡ä¼¼ï¼ŒåŒ…å«å…©å€‹å…ƒä»¶ï¼š

- [typesense-docsearch-scraper](https://github.com/typesense/typesense-docsearch-scraper) - è² è²¬çˆ¬å–æ‚¨çš„ç¶²ç«™ä¸¦å°‡è³‡æ–™ç´¢å¼•è‡³ Typesense å¢é›†ã€‚
- [docusaurus-theme-search-typesense](https://github.com/typesense/docusaurus-theme-search-typesense) - å¯æ•´åˆè‡³ç¶²ç«™çš„æœå°‹åˆ— UI å…ƒä»¶ã€‚

è«‹åƒé–±é€æ­¥æ•™å­¸ï¼š[å¦‚ä½•åŸ·è¡Œ typesense-docsearch-scraper](https://typesense.org/docs/latest/guide/docsearch.html#step-1-set-up-docsearch-scraper) ä»¥åŠ[å¦‚ä½•åœ¨ Docusaurus ç¶²ç«™å®‰è£æœå°‹åˆ—](https://typesense.org/docs/latest/guide/docsearch.html#option-a-docusaurus-powered-sites)ã€‚

## ğŸ‘¥ ä½¿ç”¨æœ¬åœ°æœå°‹ {#using-local-search}

è‹¥æœå°‹ç´¢å¼•è¦æ¨¡è¼ƒå°ä¸”å¯æ–¼ä½¿ç”¨è€…ç€è¦½ç¶²ç«™æ™‚ä¸‹è¼‰è‡³å…¶ç€è¦½å™¨ï¼Œæ‚¨å¯ä½¿ç”¨æœ¬åœ°æœå°‹å¤–æ›ã€‚

ç¤¾ç¾¤æ”¯æ´çš„[æœ¬åœ°æœå°‹å¤–æ›æ¸…å–®è«‹è¦‹æ­¤è™•](https://docusaurus.io/community/resources#search)ã€‚

## ğŸ‘¥ ä½¿ç”¨è‡ªè¨‚æœå°‹ {#using-your-own-search}

è‹¥è¦ä½¿ç”¨è‡ªè¨‚æœå°‹ï¼Œè«‹æ›¿æ› `@docusaurus/theme-classic` ä¸­çš„ `SearchBar` å…ƒä»¶

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic SearchBar
```

é€™å°‡åœ¨å°ˆæ¡ˆç›®éŒ„ä¸­å»ºç«‹ `src/themes/SearchBar` æª”æ¡ˆã€‚é‡æ–°å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ä¸¦ç·¨è¼¯å…ƒä»¶å¾Œï¼Œæ‚¨æœƒç™¼ç¾ Docusaurus ç¾åœ¨ä½¿ç”¨æ‚¨çš„è‡ªè¨‚ `SearchBar` å…ƒä»¶ã€‚

**æ³¨æ„**ï¼šæ‚¨ä¹Ÿå¯ä»¥[å¾ Algolia SearchBar é€²è¡Œæ›¿æ›](#editing-the-algolia-search-component)ï¼Œä¸¦å¾è©²è™•å»ºç«‹è‡ªå·±çš„æœå°‹å…ƒä»¶ã€‚
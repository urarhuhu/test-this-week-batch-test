---
id: code-blocks
description: Handling code blocks in Docusaurus Markdown
slug: /markdown-features/code-blocks
---

# ç¨‹å¼ç¢¼å€å¡Š

import BrowserWindow from '@site/src/components/BrowserWindow';
import CodeBlock from '@theme/CodeBlock';

æ–‡ä»¶ä¸­çš„ç¨‹å¼ç¢¼å€å¡Šæ“æœ‰å¼·åŒ–åŠŸèƒ½ ğŸ’ªã€‚

## ç¨‹å¼ç¢¼æ¨™é¡Œ {#code-title}

æ‚¨å¯ä»¥åœ¨èªè¨€å¾Œæ–¹æ·»åŠ  `title` éµå€¼ä¾†ç‚ºç¨‹å¼ç¢¼å€å¡Šè¨­å®šæ¨™é¡Œï¼ˆéœ€åœ¨èªè¨€èˆ‡æ¨™é¡Œä¹‹é–“ä¿ç•™ç©ºæ ¼ï¼‰ã€‚

````md
```jsx title="/src/components/HelloCodeTitle.js"
function HelloCodeTitle(props) {
  return <h1>Hello, {props.name}</h1>;
}
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx title="/src/components/HelloCodeTitle.js"
function HelloCodeTitle(props) {
  return <h1>Hello, {props.name}</h1>;
}
```

```mdx-code-block
</BrowserWindow>
```

## èªæ³•çªé¡¯ {#syntax-highlighting}

ç¨‹å¼ç¢¼å€å¡Šæ˜¯ç”±ä¸‰å€‹åå¼•è™ŸåŒ…åœçš„æ–‡å­—å€å¡Šã€‚æ‚¨å¯æŸ¥é–± [MDX è¦ç¯„åƒè€ƒ](https://mdxjs.com/docs/)äº†è§£è©³ç´°è¦æ ¼ã€‚

````md
```js
console.log('Every repo must come with a mascot.');
```
````

ç‚ºç¨‹å¼ç¢¼å€å¡Šä½¿ç”¨å°æ‡‰çš„èªè¨€å…ƒå­—ä¸²ï¼ŒDocusaurus æœƒè‡ªå‹•é€é [Prism React Renderer](https://github.com/FormidableLabs/prism-react-renderer) å¯¦ç¾èªæ³•çªé¡¯åŠŸèƒ½ã€‚

<BrowserWindow>

```js
console.log('Every repo must come with a mascot.');
```

</BrowserWindow>

### ä¸»é¡Œè¨­å®š {#theming}

é è¨­ä½¿ç”¨çš„ Prism [èªæ³•çªé¡¯ä¸»é¡Œ](https://github.com/FormidableLabs/prism-react-renderer#theming)ç‚º [Palenight](https://github.com/FormidableLabs/prism-react-renderer/blob/master/packages/prism-react-renderer/src/themes/palenight.ts)ã€‚æ‚¨å¯é€éåœ¨ docusaurus.config.js çš„ `themeConfig` ä¸­å‚³é `prism` çš„ `theme` æ¬„ä½ä¾†åˆ‡æ›å…¶ä»–ä¸»é¡Œã€‚

ä¾‹å¦‚ï¼Œè‹¥æ‚¨åå¥½ä½¿ç”¨ `dracula` çªé¡¯ä¸»é¡Œï¼š

```js title="docusaurus.config.js"
import {themes as prismThemes} from 'prism-react-renderer';

export default {
  themeConfig: {
    prism: {
      // highlight-next-line
      theme: prismThemes.dracula,
    },
  },
};
```

ç”±æ–¼ Prism ä¸»é¡Œæœ¬è³ªæ˜¯ JS ç‰©ä»¶ï¼Œè‹¥ä¸æ»¿æ„é è¨­ä¸»é¡Œï¼Œæ‚¨äº¦å¯è‡ªè¡Œç·¨å¯«ä¸»é¡Œã€‚Docusaurus å¼·åŒ–äº† `github` èˆ‡ `vsDark` ä¸»é¡Œä»¥æä¾›æ›´è±å¯Œçš„çªé¡¯æ•ˆæœï¼Œæ‚¨å¯åƒè€ƒæˆ‘å€‘é‡å° [æ·ºè‰²](https://github.com/facebook/docusaurus/blob/main/website/src/utils/prismLight.ts) èˆ‡ [æ·±è‰²](https://github.com/facebook/docusaurus/blob/main/website/src/utils/prismDark.ts) ç¨‹å¼ç¢¼å€å¡Šä¸»é¡Œçš„å¯¦ä½œæ–¹å¼ã€‚

### æ”¯æ´èªè¨€ {#supported-languages}

Docusaurus é è¨­å…§å»º [å¸¸ç”¨èªè¨€å­é›†](https://github.com/FormidableLabs/prism-react-renderer/blob/master/packages/generate-prism-languages/index.ts#L9-L23)ã€‚

:::warning

éƒ¨åˆ†ç†±é–€èªè¨€å¦‚ Javaã€C# æˆ– PHP é è¨­æœªå•Ÿç”¨ã€‚

:::

è‹¥è¦ç‚ºå…¶ä»– [Prism æ”¯æ´èªè¨€](https://prismjs.com/#supported-languages) æ·»åŠ èªæ³•çªé¡¯ï¼Œè«‹åœ¨é™„åŠ èªè¨€é™£åˆ—ä¸­å®šç¾©ã€‚

:::note

æ¯å€‹é™„åŠ èªè¨€å¿…é ˆæ˜¯æœ‰æ•ˆçš„ Prism å…ƒä»¶åç¨±ã€‚ä¾‹å¦‚ Prism æœƒå°‡èªè¨€ `cs` æ˜ å°„åˆ° `csharp`ï¼Œä½†åƒ…å­˜åœ¨ `prism-csharp.js` ä½œç‚º _å…ƒä»¶_ï¼Œå› æ­¤éœ€ä½¿ç”¨ `additionalLanguages: ['csharp']`ã€‚æ‚¨å¯æŸ¥é–± `node_modules/prismjs/components` æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å…ƒä»¶ï¼ˆèªè¨€ï¼‰ã€‚

:::

ä¾‹å¦‚ï¼Œè‹¥è¦ç‚º PowerShell èªè¨€æ·»åŠ çªé¡¯åŠŸèƒ½ï¼š

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    prism: {
      // highlight-next-line
      additionalLanguages: ['powershell'],
    },
    // ...
  },
};
```

æ–°å¢ `additionalLanguages` å¾Œï¼Œè«‹é‡å•Ÿ Docusaurusã€‚

è‹¥è¦ç‚º Prism å°šæœªæ”¯æ´çš„èªè¨€æ·»åŠ çªé¡¯åŠŸèƒ½ï¼Œå¯æ›¿æ› `prism-include-languages`ï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic prism-include-languages
```

æ­¤æ“ä½œæœƒåœ¨æ‚¨çš„ `src/theme` è³‡æ–™å¤¾ç”Ÿæˆ `prism-include-languages.js`ã€‚é€éç·¨è¼¯æ­¤æª”æ¡ˆå¯ç‚ºè‡ªè¨‚èªè¨€æ·»åŠ çªé¡¯æ”¯æ´ï¼š

```js title="src/theme/prism-include-languages.js"
const prismIncludeLanguages = (Prism) => {
  // ...

  additionalLanguages.forEach((lang) => {
    require(`prismjs/components/prism-${lang}`);
  });

  // highlight-next-line
  require('/path/to/your/prism-language-definition');

  // ...
};
```

ç·¨å¯«è‡ªè¨‚èªè¨€å®šç¾©æ™‚ï¼Œå¯åƒè€ƒ [Prism å®˜æ–¹èªè¨€å®šç¾©](https://github.com/PrismJS/prism/tree/master/components)ã€‚

ç•¶æ–°å¢è‡ªè¨‚èªè¨€å®šç¾©æ™‚ï¼Œæ‚¨ç„¡éœ€å°‡è©²èªè¨€åŠ å…¥ `additionalLanguages` è¨­å®šé™£åˆ—ï¼Œå› ç‚º Docusaurus åƒ…æœƒåœ¨ Prism æä¾›çš„èªè¨€ä¸­æŸ¥æ‰¾ `additionalLanguages` å­—ä¸²ã€‚åœ¨ `prism-include-languages.js` ä¸­åŒ¯å…¥èªè¨€å³å·²è¶³å¤ ã€‚

## è¡Œé«˜äº®é¡¯ç¤º {#line-highlighting}

### ä½¿ç”¨è¨»è§£é«˜äº® {#highlighting-with-comments}

æ‚¨å¯ä»¥ä½¿ç”¨å¸¶æœ‰ `highlight-next-line`ã€`highlight-start` å’Œ `highlight-end` çš„è¨»è§£ä¾†é¸æ“‡è¦é«˜äº®é¡¯ç¤ºçš„è¡Œã€‚

````md
```js
function HighlightSomeText(highlight) {
  if (highlight) {
    // highlight-next-line
    return 'This text is highlighted!';
  }

  return 'Nothing highlighted';
}

function HighlightMoreText(highlight) {
  // highlight-start
  if (highlight) {
    return 'This range is highlighted!';
  }
  // highlight-end

  return 'Nothing highlighted';
}
```
````

```mdx-code-block
<BrowserWindow>
```

```js
function HighlightSomeText(highlight) {
  if (highlight) {
    // highlight-next-line
    return 'This text is highlighted!';
  }

  return 'Nothing highlighted';
}

function HighlightMoreText(highlight) {
  // highlight-start
  if (highlight) {
    return 'This range is highlighted!';
  }
  // highlight-end

  return 'Nothing highlighted';
}
```

```mdx-code-block
</BrowserWindow>
```

æ”¯æ´çš„è¨»è§£èªæ³•ï¼š

| Style      | Syntax                   |
| ---------- | ------------------------ |
| C-style    | `/* ... */` and `// ...` |
| JSX-style  | `{/* ... */}`            |
| Bash-style | `# ...`                  |
| HTML-style | `<!-- ... -->`           |

æˆ‘å€‘æœƒç›¡åŠ›æ ¹æ“šèªè¨€æ¨æ–·æ‡‰ä½¿ç”¨å“ªçµ„è¨»è§£æ¨£å¼ï¼Œé è¨­å…è¨±ä½¿ç”¨æ‰€æœ‰è¨»è§£æ¨£å¼ã€‚è‹¥æœ‰ç›®å‰ä¸æ”¯æ´çš„è¨»è§£æ¨£å¼ï¼Œæˆ‘å€‘æ¨‚æ–¼æ–°å¢å®ƒå€‘ï¼æ­¡è¿æäº¤ Pull Requestã€‚è«‹æ³¨æ„ï¼Œä¸åŒè¨»è§£æ¨£å¼æ²’æœ‰èªæ„å·®ç•°ï¼Œåƒ…å…§å®¹æœ‰æ‰€ä¸åŒã€‚

æ‚¨å¯ä»¥åœ¨ `src/css/custom.css` ä¸­ç‚ºé«˜äº®ç¨‹å¼ç¢¼è¡Œè¨­å®šè‡ªè¨‚èƒŒæ™¯è‰²ï¼Œä»¥æ›´ç¬¦åˆæ‚¨é¸æ“‡çš„èªæ³•é«˜äº®ä¸»é¡Œã€‚ä¸‹æ–¹æä¾›çš„é¡è‰²é©ç”¨æ–¼é è¨­é«˜äº®ä¸»é¡Œ (Palenight)ï¼Œè‹¥æ‚¨ä½¿ç”¨å…¶ä»–ä¸»é¡Œï¼Œå‰‡éœ€ç›¸æ‡‰èª¿æ•´é¡è‰²ã€‚

```css title="/src/css/custom.css"
:root {
  --docusaurus-highlighted-code-line-bg: rgb(72, 77, 91);
}

/* If you have a different syntax highlighting theme for dark mode. */
[data-theme='dark'] {
  /* Color which works with dark mode syntax highlighting theme */
  --docusaurus-highlighted-code-line-bg: rgb(100, 100, 100);
}
```

è‹¥é‚„éœ€ä»¥å…¶ä»–æ–¹å¼æ¨£å¼åŒ–é«˜äº®ç¨‹å¼ç¢¼è¡Œï¼Œæ‚¨å¯ä»¥é‡å° `theme-code-block-highlighted-line` CSS é¡åˆ¥é€²è¡Œè¨­å®šã€‚

### ä½¿ç”¨å…ƒè³‡æ–™å­—ä¸²é«˜äº® {#highlighting-with-metadata-string}

æ‚¨ä¹Ÿå¯ä»¥åœ¨èªè¨€å…ƒå­—ä¸²ä¸­æŒ‡å®šé«˜äº®è¡Œç¯„åœï¼ˆåœ¨èªè¨€å¾Œç•™ç©ºæ ¼ï¼‰ã€‚è¦çªå‡ºé¡¯ç¤ºå¤šè¡Œï¼Œå¯ç”¨é€—è™Ÿåˆ†éš”è¡Œè™Ÿæˆ–ä½¿ç”¨ç¯„åœèªæ³•é¸å–å¤šè¡Œã€‚æ­¤åŠŸèƒ½ä½¿ç”¨ `parse-number-range` å‡½å¼åº«ï¼Œæ‚¨å¯åœ¨å…¶[å°ˆæ¡ˆè©³æƒ…](https://www.npmjs.com/package/parse-numeric-range)ä¸­æ‰¾åˆ°æ›´å¤šèªæ³•ã€‚

````md
```jsx {1,4-6,11}
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx {1,4-6,11}
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```

```mdx-code-block
</BrowserWindow>
```

:::tip[å»ºè­°ä½¿ç”¨è¨»è§£]

ç›¡å¯èƒ½ä½¿ç”¨è¨»è§£é€²è¡Œé«˜äº®ã€‚é€éåœ¨ç¨‹å¼ç¢¼ä¸­å…§åµŒé«˜äº®æ¨™è¨˜ï¼Œç•¶ç¨‹å¼ç¢¼å€å¡Šè®Šé•·æ™‚ï¼Œæ‚¨ç„¡éœ€æ‰‹å‹•è¨ˆç®—è¡Œæ•¸ã€‚è‹¥æ–°å¢/åˆªé™¤è¡Œï¼Œä¹Ÿç„¡éœ€èª¿æ•´è¡Œè™Ÿç¯„åœã€‚

````diff
- ```jsx {3}
+ ```jsx {4}
  function HighlightSomeText(highlight) {
    if (highlight) {
+     console.log('ç™¼ç¾é«˜äº®æ–‡å­—');
      return 'é€™æ®µæ–‡å­—è¢«é«˜äº®äº†ï¼';
    }

    return 'æ²’æœ‰é«˜äº®å…§å®¹';
  }
  ```
````

ä¸‹æ–¹æˆ‘å€‘å°‡ä»‹ç´¹å¦‚ä½•æ“´å±•é­”æ³•è¨»è§£ç³»çµ±ä¾†å®šç¾©è‡ªè¨‚æŒ‡ä»¤åŠå…¶åŠŸèƒ½ã€‚åƒ…ç•¶ä¸å­˜åœ¨é«˜äº®å…ƒå­—ä¸²æ™‚ï¼Œæ‰æœƒè§£æé­”æ³•è¨»è§£ã€‚

:::

### è‡ªè¨‚é­”æ³•è¨»è§£ {#custom-magic-comments}

`// highlight-next-line` å’Œ `// highlight-start` ç­‰è¢«ç¨±ç‚ºã€Œé­”æ³•è¨»è§£ã€ï¼Œå› ç‚ºå®ƒå€‘æœƒè¢«è§£æä¸¦ç§»é™¤ï¼Œå…¶ç›®çš„æ˜¯ç‚ºä¸‹ä¸€è¡Œæˆ–ç”±é–‹å§‹-çµæŸè¨»è§£å°åŒ…åœçš„å€æ®µæ–°å¢å…ƒè³‡æ–™ã€‚

æ‚¨å¯ä»¥é€éä¸»é¡Œè¨­å®šå®£å‘Šè‡ªè¨‚é­”æ³•è¨»è§£ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è¨»å†Šå¦ä¸€å€‹æœƒæ–°å¢ `code-block-error-line` é¡åˆ¥åç¨±çš„é­”æ³•è¨»è§£ï¼š

```mdx-code-block
<Tabs>
<TabItem value="docusaurus.config.js">
```

```js
export default {
  themeConfig: {
    prism: {
      magicComments: [
        // Remember to extend the default highlight class name as well!
        {
          className: 'theme-code-block-highlighted-line',
          line: 'highlight-next-line',
          block: {start: 'highlight-start', end: 'highlight-end'},
        },
        // highlight-start
        {
          className: 'code-block-error-line',
          line: 'This will error',
        },
        // highlight-end
      ],
    },
  },
};
```

```mdx-code-block
</TabItem>
<TabItem value="src/css/custom.css">
```

```css
.code-block-error-line {
  background-color: #ff000020;
  display: block;
  margin: 0 calc(-1 * var(--ifm-pre-padding));
  padding: 0 var(--ifm-pre-padding);
  border-left: 3px solid #ff000080;
}
```

```mdx-code-block
</TabItem>
<TabItem value="myDoc.md">
```

````md
In JavaScript, trying to access properties on `null` will error.

```js
const name = null;
// This will error
console.log(name.toUpperCase());
// Uncaught TypeError: Cannot read properties of null (reading 'toUpperCase')
```
````

```mdx-code-block
</TabItem>
</Tabs>
```

```mdx-code-block
<BrowserWindow>
```

åœ¨ JavaScript ä¸­ï¼Œå˜—è©¦å­˜å– `null` çš„å±¬æ€§æœƒå°è‡´éŒ¯èª¤ã€‚

```js
const name = null;
// This will error
console.log(name.toUpperCase());
// Uncaught TypeError: Cannot read properties of null (reading 'toUpperCase')
```

```mdx-code-block
</BrowserWindow>
```

è‹¥åœ¨å…ƒå­—ä¸²ä¸­ä½¿ç”¨æ•¸å­—ç¯„åœèªæ³•ï¼ˆå¦‚ `{1,3-4}`ï¼‰ï¼ŒDocusaurus æœƒå¥—ç”¨ **ç¬¬ä¸€å€‹ `magicComments` æ¢ç›®**çš„é¡åˆ¥åç¨±ã€‚é è¨­æƒ…æ³ä¸‹ï¼Œæ­¤é¡åˆ¥åç¨±ç‚º `theme-code-block-highlighted-line`ï¼Œä½†è‹¥æ‚¨è®Šæ›´ `magicComments` é…ç½®ä¸¦ä½¿ç”¨ä¸åŒçš„æ¢ç›®ä½œç‚ºç¬¬ä¸€å€‹é …ç›®ï¼Œå…ƒå­—ä¸²ç¯„åœçš„æ„ç¾©ä¹Ÿæœƒéš¨ä¹‹æ”¹è®Šã€‚

æ‚¨å¯é€éè¨­å®š `magicComments: []` ä¾†åœç”¨é è¨­çš„è¡Œé«˜äº®è¨»è§£ã€‚è‹¥ç„¡ä»»ä½•é­”æ³•è¨»è§£é…ç½®ï¼Œä½† Docusaurus é‡åˆ°åŒ…å«å…ƒå­—ä¸²ç¯„åœçš„ç¨‹å¼ç¢¼å€å¡Šæ™‚ï¼Œå°‡æœƒå ±éŒ¯â€”â€”å› ç‚ºæ­¤æ™‚æ²’æœ‰ä»»ä½•é¡åˆ¥åç¨±å¯ä¾›å¥—ç”¨ï¼ˆç•¢ç«Ÿé«˜äº®ç”¨çš„é¡åˆ¥åç¨±æœ¬è³ªä¸Šå°±æ˜¯ä¸€å€‹é­”æ³•è¨»è§£æ¢ç›®ï¼‰ã€‚

æ¯å€‹é­”æ³•è¨»è§£æ¢ç›®çš†åŒ…å«ä¸‰å€‹éµå€¼ï¼šå¿…å¡«çš„ `className`ã€é©ç”¨æ–¼ä¸‹ä¸€è¡Œçš„ `line`ï¼Œæˆ–æ˜¯åŒ…å« `start` èˆ‡ `end` çš„ `block`ï¼ˆç”¨æ–¼æ¨™è¨˜è¢«å…©å€‹è¨»è§£åŒ…åœçš„æ•´å€‹å€å¡Šï¼‰ã€‚

é€é CSS é–å®šé¡åˆ¥å·²èƒ½å¯¦ç¾è¨±å¤šæ•ˆæœï¼Œä½†æ‚¨å¯é€é [swizzling](../../swizzling.mdx) å¾¹åº•é‡‹æ”¾æ­¤åŠŸèƒ½çš„æ½›åŠ›ã€‚

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic CodeBlock/Line
```

`Line` å…ƒä»¶æœƒæ¥æ”¶é¡åˆ¥åç¨±æ¸…å–®ï¼Œæ‚¨å¯æ“šæ­¤æ¢ä»¶å¼æ¸²æŸ“ä¸åŒçš„æ¨™è¨˜èªè¨€ã€‚

## è¡Œè™Ÿæ¨™è¨˜ {#line-numbering}

æ‚¨å¯åœ¨ç¨‹å¼ç¢¼å€å¡Šçš„èªè¨€å…ƒå­—ä¸²ä¸­ä½¿ç”¨ `showLineNumbers` éµå€¼ä¾†å•Ÿç”¨è¡Œè™Ÿæ¨™è¨˜ï¼ˆè«‹æ³¨æ„éµå€¼å‰éœ€ä¿ç•™ç©ºæ ¼ï¼‰ã€‚

````md
```jsx showLineNumbers
import React from 'react';

export default function MyComponent(props) {
  return <div>Foo</div>;
}
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx showLineNumbers
import React from 'react';

export default function MyComponent(props) {
  return <div>Foo</div>;
}
```

```mdx-code-block
</BrowserWindow>
```

é è¨­æƒ…æ³ä¸‹ï¼Œè¡Œè™Ÿè¨ˆæ•¸å™¨å¾ 1 é–‹å§‹ã€‚æ‚¨å¯å‚³å…¥è‡ªè¨‚çš„èµ·å§‹å€¼ä¾†æ‹†åˆ†å¤§å‹ç¨‹å¼ç¢¼å€å¡Šä»¥æå‡å¯è®€æ€§ï¼š

````md
```jsx showLineNumbers=3
export default function MyComponent(props) {
  return <div>Foo</div>;
}
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx showLineNumbers=3
export default function MyComponent(props) {
  return <div>Foo</div>;
}
```

```mdx-code-block
</BrowserWindow>
```

## äº’å‹•å¼ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ {#interactive-code-editor}

ï¼ˆç”± [React Live](https://github.com/FormidableLabs/react-live) é©…å‹•ï¼‰

æ‚¨å¯ä½¿ç”¨ `@docusaurus/theme-live-codeblock` å¤–æ›å»ºç«‹äº’å‹•å¼ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ã€‚è«‹å…ˆå°‡æ­¤å¤–æ›åŠ å…¥æ‚¨çš„å°ˆæ¡ˆã€‚

```bash npm2yarn
npm install --save @docusaurus/theme-live-codeblock
```

æ‚¨é‚„éœ€åœ¨ `docusaurus.config.js` ä¸­æ–°å¢æ­¤å¤–æ›ã€‚

```js {3}
export default {
  // ...
  themes: ['@docusaurus/theme-live-codeblock'],
  // ...
};
```

è¦ä½¿ç”¨æ­¤å¤–æ›ï¼Œè«‹åœ¨ç¨‹å¼ç¢¼å€å¡Šçš„èªè¨€å…ƒå­—ä¸²å¾Œé™„åŠ  `live`ã€‚

````md
```jsx live
function Clock(props) {
  const [date, setDate] = useState(new Date());
  useEffect(() => {
    const timerID = setInterval(() => tick(), 1000);

    return function cleanup() {
      clearInterval(timerID);
    };
  });

  function tick() {
    setDate(new Date());
  }

  return (
    <div>
      <h2>It is {date.toLocaleTimeString()}.</h2>
    </div>
  );
}
```
````

ç¨‹å¼ç¢¼å€å¡Šå°‡è¢«æ¸²æŸ“ç‚ºäº’å‹•å¼ç·¨è¼¯å™¨ï¼Œç¨‹å¼ç¢¼è®Šæ›´æœƒå³æ™‚åæ˜ åœ¨çµæœé¢æ¿ä¸Šã€‚

```mdx-code-block
<BrowserWindow>
```

```jsx live
function Clock(props) {
  const [date, setDate] = useState(new Date());
  useEffect(() => {
    const timerID = setInterval(() => tick(), 1000);

    return function cleanup() {
      clearInterval(timerID);
    };
  });

  function tick() {
    setDate(new Date());
  }

  return (
    <div>
      <h2>It is {date.toLocaleTimeString()}.</h2>
    </div>
  );
}
```

```mdx-code-block
</BrowserWindow>
```

### åŒ¯å…¥æ¨¡çµ„ {#imports}

:::warning[react-live èˆ‡æ¨¡çµ„åŒ¯å…¥]

ç„¡æ³•ç›´æ¥å¾ react-live ç¨‹å¼ç¢¼ç·¨è¼¯å™¨åŒ¯å…¥å…ƒä»¶ï¼Œæ‚¨å¿…é ˆé å…ˆå®šç¾©å¯ç”¨çš„åŒ¯å…¥é …ç›®ã€‚

:::

é è¨­æƒ…æ³ä¸‹ï¼Œæ‰€æœ‰ React åŒ¯å…¥é …ç›®çš†å¯ç”¨ã€‚è‹¥éœ€æ›´å¤šå¯ç”¨åŒ¯å…¥é …ç›®ï¼Œè«‹ swizzle react-live çš„ä½œç”¨åŸŸï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-live-codeblock ReactLiveScope -- --eject
```

```jsx title="src/theme/ReactLiveScope/index.js"
import React from 'react';

// highlight-start
const ButtonExample = (props) => (
  <button
    {...props}
    style={{
      backgroundColor: 'white',
      color: 'black',
      border: 'solid red',
      borderRadius: 20,
      padding: 10,
      cursor: 'pointer',
      ...props.style,
    }}
  />
);
// highlight-end

// Add react-live imports you need here
const ReactLiveScope = {
  React,
  ...React,
  // highlight-next-line
  ButtonExample,
};

export default ReactLiveScope;
```

ç¾åœ¨å³å¯ä½¿ç”¨ `ButtonExample` å…ƒä»¶ï¼š

```mdx-code-block
<BrowserWindow>
```

```jsx live
function MyPlayground(props) {
  return (
    <div>
      <ButtonExample onClick={() => alert('hey!')}>Click me</ButtonExample>
    </div>
  );
}
```

```mdx-code-block
</BrowserWindow>
```

### å‘½ä»¤å¼æ¸²æŸ“ (noInline)

ç•¶æ‚¨çš„ç¨‹å¼ç¢¼æ©«è·¨å¤šå€‹å…ƒä»¶æˆ–è®Šæ•¸æ™‚ï¼Œæ‡‰ä½¿ç”¨ `noInline` é¸é …ä»¥é¿å…éŒ¯èª¤ã€‚

````md
```jsx live noInline
const project = 'Docusaurus';

const Greeting = () => <p>Hello {project}!</p>;

render(<Greeting />);
```
````

èˆ‡æ™®é€šäº’å‹•å¼ç¨‹å¼ç¢¼å€å¡Šä¸åŒï¼Œä½¿ç”¨ `noInline` æ™‚ï¼ŒReact Live ä¸æœƒå°‡æ‚¨çš„ç¨‹å¼ç¢¼åŒ…è£¹åœ¨è¡Œå…§å‡½æ•¸ä¸­é€²è¡Œæ¸²æŸ“ã€‚

ä½ éœ€è¦åœ¨ç¨‹å¼ç¢¼çµå°¾æ˜ç¢ºå‘¼å« `render()` ä¾†é¡¯ç¤ºè¼¸å‡ºçµæœã€‚

````mdx-code-block
<BrowserWindow>

```jsx live noInline
const project = "Docusaurus";

const Greeting = () => (
  <p>Hello {project}!</p>
);

render(
  <Greeting />
);
```

</BrowserWindow>
````

## åœ¨ç¨‹å¼ç¢¼å€å¡Šä¸­ä½¿ç”¨ JSX æ¨™è¨˜ {#using-jsx-markup}

Markdown ä¸­çš„ç¨‹å¼ç¢¼å€å¡Šå§‹çµ‚å°‡å…¶å…§å®¹ä¿ç•™ç‚ºç´”æ–‡å­—ï¼Œé€™æ„å‘³è‘—ä½ ç„¡æ³•åšåˆ°åƒé€™æ¨£çš„äº‹æƒ…ï¼š

```ts
type EditUrlFunction = (params: {
  // This doesn't turn into a link (for good reason!)
  version: <a href="/docs/versioning">Version</a>;
  versionDocsDirPath: string;
  docPath: string;
  permalink: string;
  locale: string;
}) => string | undefined;
```

å¦‚æœä½ æƒ³åµŒå…¥ HTML æ¨™è¨˜ï¼Œä¾‹å¦‚éŒ¨é»é€£çµæˆ–ç²—é«”æ–‡å­—ï¼Œå¯ä»¥ä½¿ç”¨ `<pre>` æ¨™ç±¤ã€`<code>` æ¨™ç±¤æˆ– `<CodeBlock>` å…ƒä»¶ã€‚

```jsx
<pre>
  <b>Input: </b>1 2 3 4{'\n'}
  <b>Output: </b>"366300745"{'\n'}
</pre>
```

<BrowserWindow>
  <pre>
    <b>{'Input: '}</b>
    {'1 2 3 4\n'}
    <b>{'Output: '}</b>
    {'"366300745"\n'}
  </pre>
</BrowserWindow>

:::warning[MDX å°ç©ºç™½ä¸æ•æ„Ÿ]

MDX çš„è¡Œç‚ºèˆ‡ JSX ä¸€è‡´ï¼šæ›è¡Œç¬¦è™Ÿï¼ˆå³ä½¿ä½æ–¼ `<pre>` å…§ï¼‰æœƒè¢«è½‰æ›ç‚ºç©ºæ ¼ã€‚ä½ å¿…é ˆæ˜ç¢ºå¯«å‡ºæ›è¡Œç¬¦è™Ÿæ‰èƒ½è®“å®ƒé¡¯ç¤ºå‡ºä¾†ã€‚

:::

:::warning

èªæ³•çªé¡¯åƒ…é©ç”¨æ–¼ç´”æ–‡å­—å­—ä¸²ã€‚Docusaurus ä¸æœƒå˜—è©¦è§£æåŒ…å« JSX å­å…ƒç´ çš„ç¨‹å¼ç¢¼å€å¡Šå…§å®¹ã€‚

:::

## å¤šèªè¨€æ”¯æ´çš„ç¨‹å¼ç¢¼å€å¡Š {#multi-language-support-code-blocks}

é€é MDXï¼Œä½ å¯ä»¥è¼•é¬†åœ¨æ–‡ä»¶ä¸­å»ºç«‹äº’å‹•å¼å…ƒä»¶ï¼Œä¾‹å¦‚ä½¿ç”¨æ¨™ç±¤é å…ƒä»¶ä¾†é¡¯ç¤ºå¤šç¨®ç¨‹å¼èªè¨€çš„ç¨‹å¼ç¢¼ä¸¦é€²è¡Œåˆ‡æ›ã€‚

æˆ‘å€‘æ²’æœ‰ç‚ºå¤šèªè¨€æ”¯æ´çš„ç¨‹å¼ç¢¼å€å¡Šå¯¦ä½œå°ˆç”¨å…ƒä»¶ï¼Œè€Œæ˜¯åœ¨ç¶“å…¸ä¸»é¡Œä¸­å¯¦ä½œäº†é€šç”¨çš„ [`<Tabs>`](./markdown-features-tabs.mdx) å…ƒä»¶ï¼Œè®“ä½ ä¹Ÿå¯ä»¥å°‡å…¶ç”¨æ–¼å…¶ä»–éç¨‹å¼ç¢¼çš„æƒ…å¢ƒã€‚

ä»¥ä¸‹ç¯„ä¾‹å±•ç¤ºå¦‚ä½•åœ¨æ–‡ä»¶ä¸­å»ºç«‹å¤šèªè¨€ç¨‹å¼ç¢¼æ¨™ç±¤é ã€‚è«‹æ³¨æ„ï¼Œæ¯å€‹èªè¨€å€å¡Šä¸Šæ–¹å’Œä¸‹æ–¹çš„ç©ºè¡Œæ˜¯**åˆ»æ„ä¿ç•™çš„**ã€‚é€™æ˜¯ [MDX ç›®å‰çš„é™åˆ¶](./markdown-features-react.mdx#markdown-and-jsx-interoperability)ï¼šä½ å¿…é ˆåœ¨ Markdown èªæ³•å‘¨åœç•™ç©ºè¡Œï¼ŒMDX è§£æå™¨æ‰èƒ½è­˜åˆ¥å®ƒæ˜¯ Markdown èªæ³•è€Œé JSXã€‚

````jsx
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="js" label="JavaScript">

```js
function helloWorld() {
  console.log('Hello, world!');
}
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
  print("Hello, world!")
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

</TabItem>
</Tabs>
````

é€™æ¨£ä½ å°‡ç²å¾—ä»¥ä¸‹æ•ˆæœï¼š

```mdx-code-block
<BrowserWindow>
<Tabs>
<TabItem value="js" label="JavaScript">
```

```js
function helloWorld() {
  console.log('Hello, world!');
}
```

```mdx-code-block
</TabItem>
<TabItem value="py" label="Python">
```

```py
def hello_world():
  print("Hello, world!")
```

```mdx-code-block
</TabItem>
<TabItem value="java" label="Java">
```

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

```mdx-code-block
</TabItem>
</Tabs>
</BrowserWindow>
```

å¦‚æœä½ æœ‰å¤šå€‹é€™é¡å¤šèªè¨€ç¨‹å¼ç¢¼æ¨™ç±¤é ï¼Œä¸¦å¸Œæœ›åœ¨ä¸åŒæ¨™ç±¤é å¯¦ä¾‹é–“åŒæ­¥é¸æ“‡ç‹€æ…‹ï¼Œè«‹åƒè€ƒ[åŒæ­¥æ¨™ç±¤é é¸æ“‡ç« ç¯€](markdown-features-tabs.mdx#syncing-tab-choices)ã€‚

### Docusaurus npm2yarn å‚™è¨»å¤–æ› {#npm2yarn-remark-plugin}

åŒæ™‚é¡¯ç¤º npm å’Œ Yarn çš„ CLI æŒ‡ä»¤æ˜¯å¸¸è¦‹éœ€æ±‚ï¼Œä¾‹å¦‚ï¼š

```bash npm2yarn
npm install @docusaurus/remark-plugin-npm2yarn
```

Docusaurus å…§å»ºæä¾›æ­¤å¯¦ç”¨åŠŸèƒ½ï¼Œå…å»ä½ æ¯æ¬¡ä½¿ç”¨ `Tabs` å…ƒä»¶çš„éº»ç…©ã€‚è¦å•Ÿç”¨æ­¤åŠŸèƒ½ï¼Œé¦–å…ˆå¦‚ä¸Šæ‰€è¿°å®‰è£ `@docusaurus/remark-plugin-npm2yarn` å¥—ä»¶ï¼Œç„¶å¾Œåœ¨ `docusaurus.config.js` ä¸­ï¼Œç‚ºéœ€è¦æ­¤åŠŸèƒ½çš„æ’ä»¶ï¼ˆæ–‡ä»¶ã€éƒ¨è½æ ¼ã€é é¢ç­‰ï¼‰åœ¨ `remarkPlugins` é¸é …ä¸­è¨»å†Šå®ƒã€‚ï¼ˆæœ‰é—œé…ç½®æ ¼å¼çš„è©³ç´°è³‡è¨Šï¼Œè«‹åƒé–±[æ–‡ä»¶é…ç½®](../../api/plugins/plugin-content-docs.mdx#ex-config)ï¼‰

```js title="docusaurus.config.js"
export default {
  // ...
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          // highlight-start
          remarkPlugins: [
            [require('@docusaurus/remark-plugin-npm2yarn'), {sync: true}],
          ],
          // highlight-end
        },
        pages: {
          // highlight-next-line
          remarkPlugins: [require('@docusaurus/remark-plugin-npm2yarn')],
        },
        blog: {
          // highlight-start
          remarkPlugins: [
            [
              require('@docusaurus/remark-plugin-npm2yarn'),
              {converters: ['pnpm']},
            ],
          ],
          // highlight-end
          // ...
        },
      },
    ],
  ],
};
```

ç„¶å¾Œé€éåœ¨ç¨‹å¼ç¢¼å€å¡Šä¸­æ·»åŠ  `npm2yarn` éµä¾†ä½¿ç”¨å®ƒï¼š

````md
```bash npm2yarn
npm install @docusaurus/remark-plugin-npm2yarn
```
````

#### é…ç½®é¸é … {#npm2yarn-remark-plugin-configuration}

| Option | Type | Default | Description |
| --- | --- | --- | --- |
| `sync` | `boolean` | `false` | Whether to sync the selected converter across all code blocks. |
| `converters` | `array` | `'yarn'`, `'pnpm'` | The list of converters to use. The order of the converters is important, as the first converter will be used as the default choice. |

## åœ¨ JSX ä¸­ä½¿ç”¨ {#usage-in-jsx}

åœ¨ Markdown ä¹‹å¤–ï¼Œä½ å¯ä»¥ä½¿ç”¨ `@theme/CodeBlock` å…ƒä»¶ä¾†ç²å¾—ç›¸åŒçš„è¼¸å‡ºæ•ˆæœã€‚

```jsx
import CodeBlock from '@theme/CodeBlock';

export default function MyReactPage() {
  return (
    <div>
      {/* highlight-start */}
      <CodeBlock
        language="jsx"
        title="/src/components/HelloCodeTitle.js"
        showLineNumbers>
        {`function HelloCodeTitle(props) {
  return <h1>Hello, {props.name}</h1>;
}`}
      </CodeBlock>
      {/* highlight-end */}
    </div>
  );
}
```

```mdx-code-block
<BrowserWindow>
  <CodeBlock
    language="jsx"
    title="/src/components/HelloCodeTitle.js"
    showLineNumbers>
    {`function HelloCodeTitle(props) {
  return <h1>Hello, {props.name}</h1>;
}`}
  </CodeBlock>
</BrowserWindow>
```

æ¥å—çš„å±¬æ€§åŒ…æ‹¬ `language`ã€`title` å’Œ `showLineNumbers`ï¼Œèˆ‡æ’°å¯« Markdown ç¨‹å¼ç¢¼å€å¡Šçš„æ–¹å¼ç›¸åŒã€‚

é›–ç„¶ä¸å»ºè­°ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥å‚³å…¥ `metastring` å±¬æ€§ï¼Œä¾‹å¦‚ `metastring='{1-2} title="/src/components/HelloCodeTitle.js" showLineNumbers'`ï¼Œé€™æ˜¯ Markdown ç¨‹å¼ç¢¼å€å¡Šåœ¨åº•å±¤è™•ç†çš„æ–¹å¼ã€‚ç„¶è€Œï¼Œæˆ‘å€‘å»ºè­°æ‚¨[ä½¿ç”¨è¨»è§£ä¾†æ¨™ç¤ºè¡Œè™Ÿ](#highlighting-with-comments)ã€‚

å¦‚[å…ˆå‰æ‰€è¿°](#using-jsx-markup)ï¼Œèªæ³•çªé¡¯åƒ…åœ¨å­å…§å®¹ç‚ºç°¡å–®å­—ä¸²æ™‚æ‰æœƒå¥—ç”¨ã€‚
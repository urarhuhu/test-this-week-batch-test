---
sidebar_position: 2
slug: /api/misc/@docusaurus/logger
---

# 📦 紀錄器

一個封裝的紀錄器，用於語意化地格式化控制台訊息。

鼓勵 Docusaurus 生態系統中的套件作者使用此套件來提供統一的日誌格式。

## API

它預設導出一個單一物件：`logger`。`logger` 具有以下屬性：

- 一些實用的顏色。
  - `red`
  - `yellow`
  - `green`
  - `bold`
  - `dim`
- 格式化器。這些函數都具有簽名 `(msg: unknown) => string`。請注意，它們的實現不保證穩定。您只需關注其語意。
  - `path`：格式化檔案路徑。
  - `url`：格式化 URL。
  - `name`：格式化識別符。
  - `code`：格式化程式碼片段。
  - `subdue`：淡化文字。
  - `num`：格式化數字。
- `interpolate` 函數。它是一個模板字面量標籤。語法如下所示。
- 日誌函數。所有日誌函數既可以作為普通函數使用（類似於 `console.log` 系列，但只接受一個參數），也可以作為模板字面量標籤。
  - `info`：列印資訊。
  - `warn`：列印需要關注的警告。
  - `error`：列印錯誤（不一定要終止程式），表示存在嚴重問題。
  - `success`：列印成功訊息。
- `report` 函數。它接受一個 `ReportingSeverity` 值（`ignore`、`log`、`warn`、`throw`），並根據嚴重性報告訊息。

:::warning[關於 `error` 格式化器的提醒]

請注意，`error` 訊息即使不會導致程式掛掉，也可能引起混淆。當使用者檢查日誌並看到 `[ERROR]` 時，即使建置成功，他們也會認為出了問題。請謹慎使用。

Docusaurus 僅在即將拋出錯誤前列印訊息時，或當使用者將 `onBrokenLink` 等的報告嚴重性設為 `"error"` 時，才會使用 `logger.error`。

此外，`warn` 和 `error` 會為整個訊息著色以引起注意。如果您要列印關於錯誤的大段說明文字，最好使用 `logger.info`。

:::

### 使用模板字面量標籤

模板字面量標籤會評估模板和嵌入的表達式。`interpolate` 返回一個新字串，而其他日誌函數則會列印它。以下是典型用法：

```js
import logger from '@docusaurus/logger';

logger.info`Hello name=${name}! You have number=${money} dollars. Here are the ${
  items.length > 1 ? 'items' : 'item'
} on the shelf: ${items}
To buy anything, enter code=${'buy x'} where code=${'x'} is the item's name; to quit, press code=${'Ctrl + C'}.`;
```

嵌入的表達式可以選擇性地在前面加上一個標誌，形式為 `[a-z]+=`（幾個小寫字母，後接等號，直接位於嵌入表達式之前）。如果表達式前面沒有任何標誌，則按原樣列印。否則，它會使用以下格式化器之一進行格式化：

- `path=`：`path`
- `url=`：`url`
- `name=`：`name`
- `code=`：`code`
- `subdue=`：`subdue`
- `number=`：`num`

如果表達式是一個陣列，它會格式化為 `` `\n- ${array.join('\n- ')}\n` ``（請注意它會自動獲得一個前導行結束符）。每個成員會自行格式化，項目符號不會被格式化。因此您會看到上述訊息列印如下：

![終端中的一些文字輸出，包含陣列、程式碼、名稱和數字格式化](./demo.png)
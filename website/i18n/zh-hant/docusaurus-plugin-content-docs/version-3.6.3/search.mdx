---
keywords:
  - algolia
  - search
---

# æœå°‹åŠŸèƒ½

æ‚¨å¯ä»¥é€éä»¥ä¸‹å¹¾ç¨®æ–¹å¼ç‚ºç¶²ç«™æ·»åŠ æœå°‹åŠŸèƒ½ï¼š

- ğŸ¥‡ [Algolia DocSearch](#using-algolia-docsearch)ï¼ˆ**å®˜æ–¹æ”¯æ´**ï¼‰
- ğŸ‘¥ [Typesense DocSearch](#using-typesense-docsearch)
- ğŸ‘¥ [æœ¬åœ°æœå°‹](#using-local-search)
- ğŸ‘¥ [è‡ªè¨‚ `SearchBar` çµ„ä»¶](#using-your-own-search)

:::info

ğŸ¥‡ Docusaurus å° [Algolia DocSearch](#using-algolia-docsearch) æä¾›**ä¸€ç´šæ”¯æ´**ã€‚

ğŸ‘¥ å…¶ä»–é¸é …ç”±**ç¤¾ç¾¤ç¶­è­·**ï¼šè«‹å°‡å•é¡Œå›å ±è‡³å„è‡ªçš„ç¨‹å¼åº«ã€‚

:::

## ğŸ¥‡ ä½¿ç”¨ Algolia DocSearch {#using-algolia-docsearch}

Docusaurus **å®˜æ–¹æ”¯æ´** [Algolia DocSearch](https://docsearch.algolia.com)ã€‚

è©²æœå‹™å°ä»»ä½•é–‹ç™¼è€…æ–‡ä»¶æˆ–æŠ€è¡“éƒ¨è½æ ¼**å…è²»é–‹æ”¾**ï¼šè«‹å‹™å¿…é–±è®€[ç”³è«‹è³‡æ ¼](https://docsearch.algolia.com/docs/who-can-apply/)ä¸¦[æäº¤ DocSearch è¨ˆç•«ç”³è«‹](https://docsearch.algolia.com/apply)ã€‚

DocSearch æ¯é€±æœƒçˆ¬å–æ‚¨çš„ç¶²ç«™ä¸€æ¬¡ï¼ˆæ’ç¨‹å¯é€éç¶²é ä»‹é¢èª¿æ•´ï¼‰ï¼Œä¸¦å°‡æ‰€æœ‰å…§å®¹å½™æ•´è‡³ Algolia ç´¢å¼•ä¸­ã€‚é€™äº›å…§å®¹éš¨å¾Œæœƒé€é Algolia API ç›´æ¥å¾å‰ç«¯æŸ¥è©¢ã€‚

è‹¥æ‚¨çš„ç¶²ç«™[ä¸ç¬¦åˆ](https://docsearch.algolia.com/docs/who-can-apply)å…è²»è¨—ç®¡ç‰ˆ DocSearch çš„è³‡æ ¼ï¼Œæˆ–æ˜¯ç¶²ç«™ä½æ–¼é˜²ç«ç‰†å¾Œæ–¹è€Œéå…¬é–‹ç‹€æ…‹ï¼Œæ‚¨å¯ä»¥[è‡ªè¡Œé‹è¡Œ](https://docsearch.algolia.com/docs/run-your-own/) DocSearch çˆ¬èŸ²ç¨‹å¼ã€‚

:::note

é è¨­æƒ…æ³ä¸‹ï¼ŒDocusaurus é è¨­é…ç½®æœƒç”Ÿæˆ Algolia çˆ¬èŸ²å¯ä½¿ç”¨çš„ [sitemap.xml](https://docusaurus.io/sitemap.xml)ã€‚

:::

:::info[å¾èˆŠç‰ˆ docsearch é·ç§»ï¼Ÿ]

æ‚¨å¯ä»¥åœ¨[æˆ‘å€‘çš„éƒ¨è½æ ¼æ–‡ç« ](/blog/2021/11/21/algolia-docsearch-migration)æˆ– [DocSearch é·ç§»æ–‡ä»¶](https://docsearch.algolia.com/docs/migrating-from-legacy)ä¸­é–±è®€æ›´å¤šé—œæ–¼å¾èˆŠç‰ˆ DocSearch åŸºç¤æ¶æ§‹é·ç§»çš„è³‡è¨Šã€‚

:::

### ç´¢å¼•é…ç½® {#algolia-index-configuration}

ç•¶æ‚¨çš„ç”³è«‹é€šéä¸¦éƒ¨ç½²å¾Œï¼Œæ‚¨å°‡æ”¶åˆ°ä¸€å°åŒ…å«æ‰€æœ‰è©³ç´°è³‡è¨Šçš„é›»å­éƒµä»¶ï¼Œä»¥ä¾¿å°‡ DocSearch æ·»åŠ åˆ°å°ˆæ¡ˆä¸­ã€‚æ‚¨å¯ä»¥é€é[ç¶²é ä»‹é¢](https://crawler.algolia.com/)ç·¨è¼¯å’Œç®¡ç†çˆ¬å–ä½œæ¥­ã€‚ç´¢å¼•åœ¨éƒ¨ç½²å¾Œå³å¯ç«‹å³ä½¿ç”¨ï¼Œå› æ­¤é€šå¸¸ä¸éœ€è¦æ‰‹å‹•é…ç½®ã€‚

:::danger[ä½¿ç”¨æ¨è–¦çš„çˆ¬èŸ²é…ç½®]

å¼·çƒˆå»ºè­°ä½¿ç”¨æˆ‘å€‘å®˜æ–¹çš„ [**Docusaurus v3 çˆ¬èŸ²é…ç½®æ¨¡æ¿**](https://docsearch.algolia.com/docs/templates/#docusaurus-v3-template)ã€‚è‹¥æ‚¨é¸æ“‡ä¸åŒçš„çˆ¬èŸ²é…ç½®ï¼Œæˆ‘å€‘å°‡ç„¡æ³•æä¾›æ”¯æ´ã€‚

:::

:::warning[æ›´æ–°çˆ¬èŸ²é…ç½®æ™‚]

çˆ¬èŸ²é…ç½®ä¸­åŒ…å«çš„ `initialIndexSettings` åƒ…åœ¨ Algolia ç´¢å¼•å°šæœªå»ºç«‹æ™‚ç”¨æ–¼åˆå§‹åŒ–ã€‚

è‹¥æ‚¨æ›´æ–°çˆ¬èŸ²è¨­å®šä¸­çš„ `initialIndexSettings`ï¼Œé›–ç„¶å¯ä»¥é€éä»‹é¢æ‰‹å‹•æ›´æ–°ç´¢å¼•ï¼Œä½† [Algolia åœ˜éšŠå»ºè­°åˆªé™¤ç¾æœ‰ç´¢å¼•å¾Œé‡æ–°åŸ·è¡Œçˆ¬å–](https://github.com/facebook/docusaurus/issues/9200#issuecomment-1667338492)ï¼Œä»¥ç¢ºä¿ç´¢å¼•èƒ½å®Œæ•´åœ°ä»¥æ–°è¨­å®šé‡æ–°åˆå§‹åŒ–ã€‚

:::

### é€£æ¥ Algolia {#connecting-algolia}

Docusaurus å…§å»ºçš„ `@docusaurus/preset-classic` æ”¯æ´ Algolia DocSearch æ•´åˆã€‚è‹¥æ‚¨ä½¿ç”¨ç¶“å…¸é è¨­é…ç½®ï¼Œå‰‡ç„¡éœ€é¡å¤–å®‰è£ã€‚

<details>
<summary>Installation steps when not using <code>@docusaurus/preset-classic</code></summary>

1. Install the package:

```bash npm2yarn
npm install --save @docusaurus/theme-search-algolia
```

2. Register the theme in `docusaurus.config.js`:

```js title="docusaurus.config.js"
export default {
  title: 'My site',
  // ...
  themes: ['@docusaurus/theme-search-algolia'],
  themeConfig: {
    // ...
  },
};
```

</details>

æ¥è‘—ï¼Œåœ¨ `themeConfig` ä¸­æ·»åŠ  `algolia` æ¬„ä½ã€‚[ç”³è«‹ DocSearch](https://docsearch.algolia.com/apply/) ä»¥å–å¾—æ‚¨çš„ Algolia ç´¢å¼•å’Œ API é‡‘é‘°ã€‚

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      // The application ID provided by Algolia
      appId: 'YOUR_APP_ID',

      // Public API key: it is safe to commit it
      apiKey: 'YOUR_SEARCH_API_KEY',

      indexName: 'YOUR_INDEX_NAME',

      // Optional: see doc section below
      contextualSearch: true,

      // Optional: Specify domains where the navigation should occur through window.location instead on history.push. Useful when our Algolia config crawls multiple documentation sites and we want to navigate with window.location.href to them.
      externalUrlRegex: 'external\\.com|domain\\.com',

      // Optional: Replace parts of the item URLs from Algolia. Useful when using the same search index for multiple deployments using a different baseUrl. You can use regexp or string in the `from` param. For example: localhost:3000 vs myCompany.com/docs
      replaceSearchResultPathname: {
        from: '/docs/', // or as RegExp: /\/docs\//
        to: '/',
      },

      // Optional: Algolia search parameters
      searchParameters: {},

      // Optional: path for search page that enabled by default (`false` to disable it)
      searchPagePath: 'search',

      // Optional: whether the insights feature is enabled or not on Docsearch (`false` by default)
      insights: false,

      //... other Algolia params
    },
    // highlight-end
  },
};
```

:::info

åœ¨ Docusaurus v1 ä¸­ï¼Œ`searchParameters` é¸é …åŸåç‚º `algoliaOptions`ã€‚

è«‹åƒé–±å…¶ [å®˜æ–¹ DocSearch æ–‡ä»¶](https://docsearch.algolia.com/docs/api#searchparameters) äº†è§£å¯èƒ½çš„åƒæ•¸å€¼ã€‚

:::

:::warning

åœ¨ Algolia çˆ¬å–æ‚¨çš„ç¶²ç«™ä¹‹å‰ï¼Œæœå°‹åŠŸèƒ½å¯èƒ½ç„¡æ³•ç©©å®šé‹ä½œã€‚

è‹¥åœ¨é‡å¤§è®Šæ›´å¾Œæœå°‹å¤±æ•ˆï¼Œè«‹é€é Algolia å„€è¡¨æ¿ **æ‰‹å‹•è§¸ç™¼é‡æ–°çˆ¬å–**ã€‚

:::

### ä¸Šä¸‹æ–‡æœå°‹ {#contextual-search}

ä¸Šä¸‹æ–‡æœå°‹åŠŸèƒ½ **é è¨­å•Ÿç”¨**ã€‚

æ­¤åŠŸèƒ½å¯ç¢ºä¿æœå°‹çµæœ **èˆ‡ç•¶å‰èªè¨€å’Œç‰ˆæœ¬ç›¸é—œ**ã€‚

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: true,
    },
    // highlight-end
  },
};
```

å‡è¨­æ‚¨æœ‰ 2 å€‹æ–‡ä»¶ç‰ˆæœ¬ (**v1** å’Œ **v2**) èˆ‡ 2 ç¨®èªè¨€ (`en` å’Œ `fr`)ã€‚

ç•¶ç€è¦½ v2 æ–‡ä»¶æ™‚ï¼Œè‹¥å‡ºç¾ v1 çš„æœå°‹çµæœæœƒé¡¯å¾—çªå…€ã€‚æœ‰æ™‚ v1 èˆ‡ v2 æ–‡ä»¶å…§å®¹ç›¸ä¼¼ï¼Œå¯èƒ½å°è‡´ç›¸åŒæŸ¥è©¢å‡ºç¾é‡è¤‡çµæœï¼ˆæ¯å€‹ç‰ˆæœ¬å„ä¸€ç­†ï¼‰ã€‚

åŒç†ï¼Œç€è¦½æ³•æ–‡ç¶²ç«™æ™‚ï¼Œè‹¥å‡ºç¾è‹±æ–‡æ–‡ä»¶çš„æœå°‹çµæœä¹Ÿä¸åˆç†ã€‚

ç‚ºè§£æ±ºæ­¤å•é¡Œï¼Œä¸Šä¸‹æ–‡æœå°‹æœƒå‹•æ…‹è­˜åˆ¥æ‚¨æ­£åœ¨ç€è¦½çš„ç‰¹å®šæ–‡ä»¶ç‰ˆæœ¬èˆ‡èªè¨€ï¼Œä¸¦è‡ªå‹•å»ºç«‹å°æ‡‰çš„æœå°‹ç¯©é¸æ¢ä»¶ã€‚

- åœ¨ `/en/docs/v1/myDoc` é é¢ï¼Œæœå°‹çµæœåƒ…åŒ…å« **è‹±æ–‡ç‰ˆ v1** æ–‡ä»¶ï¼ˆåŠå…¶ä»–æœªç‰ˆæœ¬åŒ–çš„é é¢ï¼‰
- åœ¨ `/fr/docs/v2/myDoc` é é¢ï¼Œæœå°‹çµæœåƒ…åŒ…å« **æ³•æ–‡ç‰ˆ v2** æ–‡ä»¶ï¼ˆåŠå…¶ä»–æœªç‰ˆæœ¬åŒ–çš„é é¢ï¼‰

:::info

ç•¶å•Ÿç”¨ `contextualSearch: true`ï¼ˆé è¨­å€¼ï¼‰æ™‚ï¼Œä¸Šä¸‹æ–‡ç¯©é¸æ¢ä»¶æœƒèˆ‡ `algolia.searchParameters.facetFilters` æä¾›çš„ç¯©é¸æ¢ä»¶åˆä½µã€‚

è‹¥æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¯åœç”¨ `contextualSearch` ä¸¦è‡ªè¨‚ `facetFilters`ï¼š

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: false,
      searchParameters: {
        facetFilters: ['language:en', ['filter1', 'filter2'], 'filter3'],
      },
    },
    // highlight-end
  },
};
```

è©³è¦‹ [Algolia ç¯©é¸åŠŸèƒ½æ–‡ä»¶](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/)ã€‚

:::

:::warning[ä¸Šä¸‹æ–‡æœå°‹å¤±æ•ˆï¼Ÿ]

è‹¥åƒ…åœ¨åœç”¨ä¸Šä¸‹æ–‡æœå°‹æ™‚æ‰èƒ½å–å¾—çµæœï¼Œæ¥µå¯èƒ½æ˜¯å›  [ç´¢å¼•è¨­å®šå•é¡Œ](#algolia-no-search-results) æ‰€è‡´ã€‚

:::

### è‡ªè¨‚ Algolia æœå°‹æ¨£å¼ {#styling-your-algolia-search}

DocSearch é è¼‰ç¬¦åˆç„¡éšœç¤™æ¨™æº–çš„ç²¾å¿ƒèª¿æ ¡ä¸»é¡Œï¼Œç¢ºä¿è‰²å½©èˆ‡å°æ¯”åº¦é”æ¨™ã€‚

æ‚¨ä»å¯é€éç·¨è¼¯ `/src/css/custom.css` æª”æ¡ˆï¼Œä½¿ç”¨ Docusaurus çš„ [Infima CSS è®Šæ•¸](styling-layout.mdx#styling-your-site-with-infima) ä¾†èª¿æ•´ DocSearch æ¨£å¼ã€‚

```css title="/src/css/custom.css"
[data-theme='light'] .DocSearch {
  /* --docsearch-primary-color: var(--ifm-color-primary); */
  /* --docsearch-text-color: var(--ifm-font-color-base); */
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(94, 100, 112, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-color-secondary-lighter);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-color-secondary);
  --docsearch-searchbox-focus-background: var(--ifm-color-white);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-white);
  /* Footer */
  --docsearch-footer-background: var(--ifm-color-white);
}

[data-theme='dark'] .DocSearch {
  --docsearch-text-color: var(--ifm-font-color-base);
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(47, 55, 69, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-background-color);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-background-color);
  --docsearch-searchbox-focus-background: var(--ifm-color-black);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-emphasis-100);
  /* Footer */
  --docsearch-footer-background: var(--ifm-background-surface-color);
  --docsearch-key-gradient: linear-gradient(
    -26.5deg,
    var(--ifm-color-emphasis-200) 0%,
    var(--ifm-color-emphasis-100) 100%
  );
}
```

### è‡ªè¨‚ Algolia æœå°‹è¡Œç‚º {#customizing-the-algolia-search-behavior}

Algolia DocSearch æ”¯æ´é€é `docusaurus.config.js` ä¸­çš„ `algolia` æ¬„ä½å‚³é [å¤šç¨®åƒæ•¸](https://docsearch.algolia.com/docs/api/)ã€‚

```js title="docusaurus.config.js"
export default {
  themeConfig: {
    // ...
    algolia: {
      apiKey: 'YOUR_API_KEY',
      indexName: 'YOUR_INDEX_NAME',
      // Options...
    },
  },
};
```

### ç·¨è¼¯ Algolia æœå°‹å…ƒä»¶ {#editing-the-algolia-search-component}

è‹¥éœ€ä¿®æ”¹ Algolia æœå°‹çš„ React å…ƒä»¶ï¼Œå¯å° `@docusaurus/theme-search-algolia` ä¸­çš„ `SearchBar` å…ƒä»¶é€²è¡Œ [swizzle æ“ä½œ](swizzling.mdx)ï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-search-algolia SearchBar
```

### ç–‘é›£æ’è§£ {#algolia-troubleshooting}

Here are the most common issues Docusaurus users face when using Algolia DocSearch.

#### No Search Results {#algolia-no-search-results}

Seeing no search results is usually related to an **index configuration problem**.

<details>
  <summary>How to check if I have a config problem?</summary>

Docusaurus uses [Algolia faceting](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/) for its [Contextual Search](#contextual-search) feature, to create dynamic queries such as:

```json
[
  "language:en",
  [
    "docusaurus_tag:default",
    "docusaurus_tag:docs-default-3.2.1",
    "docusaurus_tag:docs-community-current",
    "docusaurus_tag:docs-docs-tests-current"
  ]
]
```

On the Algolia UI, your index should allow to create facet queries on fields `docusaurus_tag`, `language`, `lang`, `version`, `type`, as shown in the screenshot below:

![Algolia index showing appropriate faceting fields](/img/docsearch-troubleshoot-index-facets.jpg)

Alternatively, if you disable [Contextual Search](#contextual-search) with `{contextualSearch: false}` (which we don't particularly recommend), Docusaurus will not use facet queries, and you should start seeing results.

</details>

:::danger[Use the recommended configuration]

We [recommend a specific crawler configuration](#algolia-index-configuration) for a good reason. We cannot support you if you choose to use a different configuration.

:::

You can fix index configuration problems by following those steps:

1. Use the [recommend crawler configuration](#algolia-index-configuration)
2. Delete your index through the UI
3. Trigger a new crawl through the UI
4. Check your index is recreated with the appropriate faceting fields: `docusaurus_tag`, `language`, `lang`, `version`, `type`
5. See that you now get search results, even with [Contextual Search](#contextual-search) enabled

### Support {#algolia-support}

The Algolia DocSearch team can help you figure out search problems on your site.

You can reach out to Algolia via [their support page](https://algolia.com/support) or on [Discord](https://discord.gg/wr2m5j948P).

Docusaurus also has an `#algolia` channel on [Discord](https://discordapp.com/invite/docusaurus).

## ğŸ‘¥ Using Typesense DocSearch {#using-typesense-docsearch}

[Typesense](https://typesense.org) DocSearch works similar to Algolia DocSearch, except that your website is indexed into a Typesense search cluster.

Typesense is an [open source](https://github.com/typesense/typesense) instant-search engine that you can either:

- [Self-Host](https://typesense.org/docs/guide/install-typesense.html#option-2-local-machine-self-hosting) on your own servers or
- Use the Managed [Typesense Cloud](https://cloud.typesense.org) service.

Similar to Algolia DocSearch, there are two components:

- [typesense-docsearch-scraper](https://github.com/typesense/typesense-docsearch-scraper) - which scrapes your website and indexes the data in your Typesense cluster.
- [docusaurus-theme-search-typesense](https://github.com/typesense/docusaurus-theme-search-typesense) - a search bar UI component to add to your website.

Read a step-by-step walk-through of how to [run typesense-docsearch-scraper here](https://typesense.org/docs/guide/docsearch.html#step-1-set-up-docsearch-scraper) and how to [install the Search Bar in your Docusaurus Site here](https://typesense.org/docs/guide/docsearch.html#option-a-docusaurus-powered-sites).

## ğŸ‘¥ Using Local Search {#using-local-search}

You can use a local search plugin for websites where the search index is small and can be downloaded to your users' browsers when they visit your website.

You'll find a list of community-supported [local search plugins listed here](https://docusaurus.io/community/resources#search).

## ğŸ‘¥ Using your own search {#using-your-own-search}

To use your own search, swizzle the `SearchBar` component in `@docusaurus/theme-classic`

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic SearchBar
```

This will create an `src/theme/SearchBar` file in your project folder. Restart your dev server and edit the component, you will see that Docusaurus uses your own `SearchBar` component now.

**Notes**: You can alternatively [swizzle from Algolia SearchBar](#editing-the-algolia-search-component) and create your own search component from there.
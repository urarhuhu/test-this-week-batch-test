---
sidebar_position: 8
slug: /api/plugins/@docusaurus/plugin-ideal-image
---

# ğŸ“¦ plugin-ideal-image

import APITable from '@site/src/components/APITable';

Docusaurus æ’ä»¶ï¼Œç”¨æ–¼ç”Ÿæˆè¿‘ä¹ç†æƒ³çš„åœ–ç‰‡ï¼ˆéŸ¿æ‡‰å¼ã€æ‡¶åŠ è¼‰å’Œä½è³ªé‡ä½”ä½åœ–ï¼‰ã€‚

:::info

é è¨­æƒ…æ³ä¸‹ï¼Œè©²æ’ä»¶åœ¨é–‹ç™¼ç’°å¢ƒä¸­è™•æ–¼**éæ´»å‹•ç‹€æ…‹**ï¼Œä»¥ä¾¿æ‚¨å§‹çµ‚å¯ä»¥æŸ¥çœ‹å…¨å°ºå¯¸åœ–ç‰‡ã€‚å¦‚æœæ‚¨æƒ³èª¿è©¦ç†æƒ³åœ–ç‰‡è¡Œç‚ºï¼Œå¯ä»¥å°‡ [`disableInDev`](#disableInDev) é¸é …è¨­ç½®ç‚º `false`ã€‚

:::

## å®‰è£ {#installation}

```bash npm2yarn
npm install --save @docusaurus/plugin-ideal-image
```

## ä½¿ç”¨æ–¹æ³• {#usage}

æ­¤æ’ä»¶åƒ…æ”¯æ´ PNG å’Œ JPG æ ¼å¼ã€‚

```jsx
import Image from '@theme/IdealImage';
import thumbnail from './path/to/img.png';

// your React code
<Image img={thumbnail} />

// or
<Image img={require('./path/to/img.png')} />
```

:::warning

æ­¤æ’ä»¶è¨»å†Šäº†ä¸€å€‹ [Webpack åŠ è¼‰å™¨](https://webpack.js.org/loaders/)ï¼Œæœƒæ”¹è®Šå°å…¥/è«‹æ±‚çš„åœ–ç‰‡é¡å‹ï¼š

- ä¹‹å‰ï¼š`string`
- ä¹‹å¾Œï¼š`{preSrc: string, src: import("@theme/IdealImage").SrcImage}`

:::

:::warning[é‡å° pnpm ç”¨æˆ¶]

å¾ [pnpm 10](https://github.com/pnpm/pnpm/releases/tag/v10.0.0) é–‹å§‹ï¼Œé‹è¡Œ `pnpm install` é è¨­ä¸æœƒåŸ·è¡Œä¾è³´é …çš„å®‰è£è…³æœ¬ã€‚ç‚ºäº†è®“æˆ‘å€‘çš„ `sharp` åœ–ç‰‡èª¿æ•´å¤§å°ä¾è³´é …æ­£ç¢ºå®‰è£ï¼Œæ‚¨éœ€è¦é¡å¤–çš„ pnpm é…ç½®ï¼ˆ[å•é¡Œ](https://github.com/lovell/sharp/issues/4343)ï¼‰ï¼Œä¾‹å¦‚ï¼š

```json title="package.json"
{
  "pnpm": {
    "onlyBuiltDependencies": ["fsevents"]
  }
}
```

## é…ç½® {#configuration}

æ¥å—çš„å­—æ®µï¼š

```mdx-code-block
<APITable>
```

| é¸é … | é¡å‹ | é è¨­å€¼ | æè¿° |
| --- | --- | --- | --- |
| `name` | `string` | `ideal-img/[name].[hash:hex:7].[width].[ext]` | è¼¸å‡ºæ–‡ä»¶çš„æ–‡ä»¶åæ¨¡æ¿ã€‚ |
| `sizes` | `number[]` | _åŸå§‹å°ºå¯¸_ | æŒ‡å®šæ‚¨æƒ³è¦ä½¿ç”¨çš„æ‰€æœ‰å¯¬åº¦ã€‚å¦‚æœæŒ‡å®šçš„å¤§å°è¶…éåŸå§‹åœ–ç‰‡çš„å¯¬åº¦ï¼Œå‰‡ä½¿ç”¨å¾Œè€…ï¼ˆå³åœ–ç‰‡ä¸æœƒè¢«æ”¾å¤§ï¼‰ã€‚ |
| `size` | `number` | _åŸå§‹å°ºå¯¸_ | æŒ‡å®šæ‚¨æƒ³è¦ä½¿ç”¨çš„ä¸€å€‹å¯¬åº¦ï¼›å¦‚æœæŒ‡å®šçš„å¤§å°è¶…éåŸå§‹åœ–ç‰‡çš„å¯¬åº¦ï¼Œå‰‡ä½¿ç”¨å¾Œè€…ï¼ˆå³åœ–ç‰‡ä¸æœƒè¢«æ”¾å¤§ï¼‰ |
| `min` | `number` |  | ä½œç‚ºæ‰‹å‹•æŒ‡å®š `sizes` çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ‚¨å¯ä»¥æŒ‡å®š `min`ã€`max` å’Œ `steps`ï¼Œç³»çµ±å°‡ç‚ºæ‚¨ç”Ÿæˆå°ºå¯¸ã€‚ |
| `max` | `number` |  | åƒè¦‹ä¸Šé¢çš„ `min` |
| `steps` | `number` | `4` | é…ç½®åœ¨ `min` å’Œ `max` ä¹‹é–“ï¼ˆåŒ…æ‹¬å…©ç«¯ï¼‰ç”Ÿæˆçš„åœ–ç‰‡æ•¸é‡ |
| `quality` | `number` | `85` | JPEG å£“ç¸®è³ªé‡ |
| `disableInDev` | `boolean` | `true` | æ‚¨å¯ä»¥é€šéå°‡æ­¤é¸é …è¨­ç½®ç‚º `false` ä¾†åœ¨é–‹ç™¼æ¨¡å¼ä¸‹æ¸¬è©¦ç†æƒ³åœ–ç‰‡è¡Œç‚ºã€‚**æç¤º**ï¼šåœ¨ç€è¦½å™¨ä¸­ä½¿ç”¨[ç¶²çµ¡ç¯€æµ](https://www.browserstack.com/guide/how-to-perform-network-throttling-in-chrome)ä¾†æ¨¡æ“¬æ…¢é€Ÿç¶²çµ¡ã€‚ |

```mdx-code-block
</APITable>
```

### ç¤ºä¾‹é…ç½® {#ex-config}

ä»¥ä¸‹æ˜¯ä¸€å€‹ç¤ºä¾‹é…ç½®ï¼š

```js title="docusaurus.config.js"
export default {
  plugins: [
    [
      '@docusaurus/plugin-ideal-image',
      // highlight-start
      {
        quality: 70,
        max: 1030, // èª¿æ•´å¾Œåœ–ç‰‡çš„æœ€å¤§å°ºå¯¸ã€‚
        min: 640, // èª¿æ•´å¾Œåœ–ç‰‡çš„æœ€å°å°ºå¯¸ã€‚å¦‚æœåŸå§‹å°ºå¯¸æ›´å°ï¼Œå‰‡ä½¿ç”¨åŸå§‹å°ºå¯¸ã€‚
        steps: 2, // åœ¨ min å’Œ max ä¹‹é–“ï¼ˆåŒ…æ‹¬å…©ç«¯ï¼‰ç”Ÿæˆçš„åœ–ç‰‡æœ€å¤§æ•¸é‡
        disableInDev: false,
      },
      // highlight-end
    ],
  ],
};
```
---
keywords:
  - algolia
  - search
---

# æœå°‹åŠŸèƒ½

æ‚¨å¯ä»¥é€éä»¥ä¸‹å¹¾ç¨®æ–¹å¼ç‚ºç¶²ç«™æ·»åŠ æœå°‹åŠŸèƒ½ï¼š

- ğŸ¥‡ [Algolia DocSearch](#using-algolia-docsearch) (**å®˜æ–¹æ”¯æ´**)
- ğŸ‘¥ [Typesense DocSearch](#using-typesense-docsearch)
- ğŸ‘¥ [æœ¬åœ°æœå°‹](#using-local-search)
- ğŸ‘¥ [è‡ªè¨‚ `SearchBar` çµ„ä»¶](#using-your-own-search)

:::info

ğŸ¥‡ Docusaurus å° [Algolia DocSearch](#using-algolia-docsearch) æä¾›**ä¸€ç´šæ”¯æ´**ã€‚

ğŸ‘¥ å…¶ä»–é¸é …ç”±**ç¤¾ç¾¤ç¶­è­·**ï¼šè«‹å°‡éŒ¯èª¤å›å ±è‡³å„è‡ªçš„ç¨‹å¼åº«ã€‚

:::

## ğŸ¥‡ ä½¿ç”¨ Algolia DocSearch {#using-algolia-docsearch}

Docusaurus **å®˜æ–¹æ”¯æ´** [Algolia DocSearch](https://docsearch.algolia.com)ã€‚

è©²æœå‹™å°ä»»ä½•é–‹æºå°ˆæ¡ˆ**å…è²»**ï¼šè«‹å‹™å¿…é–±è®€[æª¢æŸ¥æ¸…å–®](https://docsearch.algolia.com/docs/who-can-apply/)ä¸¦[ç”³è«‹åŠ å…¥ DocSearch è¨ˆç•«](https://docsearch.algolia.com/apply)ã€‚

DocSearch æ¯é€±çˆ¬å–æ‚¨çš„ç¶²ç«™ä¸€æ¬¡ï¼ˆå¯é€éç¶²é ä»‹é¢èª¿æ•´æ’ç¨‹ï¼‰ï¼Œä¸¦å°‡æ‰€æœ‰å…§å®¹å½™ç¸½è‡³ Algolia ç´¢å¼•ä¸­ã€‚é€™äº›å…§å®¹éš¨å¾Œæœƒé€é Algolia API ç›´æ¥å¾å‰ç«¯æŸ¥è©¢ã€‚

è‹¥æ‚¨çš„ç¶²ç«™[ä¸ç¬¦åˆ](https://docsearch.algolia.com/docs/who-can-apply)å…è²»è¨—ç®¡ç‰ˆ DocSearch çš„è³‡æ ¼ï¼Œæˆ–ç¶²ç«™ä½æ–¼é˜²ç«ç‰†å¾Œä¸”éå…¬é–‹ç‹€æ…‹ï¼Œæ‚¨å¯ä»¥[è‡ªè¡Œé‹è¡Œ](https://docsearch.algolia.com/docs/run-your-own/) DocSearch çˆ¬èŸ²ç¨‹å¼ã€‚

:::note

é è¨­æƒ…æ³ä¸‹ï¼ŒDocusaurus é è¨­é…ç½®æœƒç”Ÿæˆ Algolia çˆ¬èŸ²å¯ä½¿ç”¨çš„ [sitemap.xml](https://docusaurus.io/sitemap.xml)ã€‚

:::

:::info[ä¾†è‡ªèˆŠç‰ˆ docsearchï¼Ÿ]

æ‚¨å¯ä»¥åœ¨[æˆ‘å€‘çš„éƒ¨è½æ ¼æ–‡ç« ](/blog/2021/11/21/algolia-docsearch-migration)æˆ– [DocSearch é·ç§»æ–‡ä»¶](https://docsearch.algolia.com/docs/migrating-from-legacy)ä¸­é–±è®€æ›´å¤šé—œæ–¼å¾èˆŠç‰ˆ DocSearch åŸºç¤æ¶æ§‹é·ç§»çš„è³‡è¨Šã€‚

:::

### ç´¢å¼•é…ç½® {#algolia-index-configuration}

ç•¶æ‚¨çš„ç”³è«‹é€šéä¸¦éƒ¨ç½²å¾Œï¼Œæ‚¨å°‡æ”¶åˆ°ä¸€å°åŒ…å«æ‰€æœ‰è©³ç´°è³‡è¨Šçš„é›»å­éƒµä»¶ï¼Œä»¥ä¾¿å°‡ DocSearch æ·»åŠ åˆ°å°ˆæ¡ˆä¸­ã€‚æ‚¨å¯ä»¥é€é[ç¶²é ä»‹é¢](https://crawler.algolia.com/)ç·¨è¼¯å’Œç®¡ç†çˆ¬å–ä»»å‹™ã€‚ç´¢å¼•åœ¨éƒ¨ç½²å¾Œç«‹å³å¯ç”¨ï¼Œå› æ­¤é€šå¸¸ä¸éœ€è¦æ‰‹å‹•é…ç½®ã€‚

:::tip

å¼·çƒˆå»ºè­°ä½¿ç”¨é¡ä¼¼æ–¼ [**Docusaurus 2 ç¶²ç«™é…ç½®**](https://docsearch.algolia.com/docs/templates/#docusaurus-v2-template)çš„è¨­å®šã€‚

:::

### é€£æ¥ Algolia {#connecting-algolia}

Docusaurus è‡ªå¸¶çš„ `@docusaurus/preset-classic` æ”¯æ´ Algolia DocSearch æ•´åˆã€‚è‹¥æ‚¨ä½¿ç”¨ç¶“å…¸é è¨­é…ç½®ï¼Œå‰‡ç„¡éœ€é¡å¤–å®‰è£ã€‚

<details>
<summary>Installation steps when not using <code>@docusaurus/preset-classic</code></summary>

1. Install the package:

```bash npm2yarn
npm install --save @docusaurus/theme-search-algolia
```

2. Register the theme in `docusaurus.config.js`:

```js title="docusaurus.config.js"
module.exports = {
  title: 'My site',
  // ...
  themes: ['@docusaurus/theme-search-algolia'],
  themeConfig: {
    // ...
  },
};
```

</details>

æ¥è‘—ï¼Œåœ¨ `themeConfig` ä¸­æ·»åŠ  `algolia` æ¬„ä½ã€‚**[ç”³è«‹ DocSearch](https://docsearch.algolia.com/apply/)** ä»¥å–å¾—æ‚¨çš„ Algolia ç´¢å¼•å’Œ API é‡‘é‘°ã€‚

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      // The application ID provided by Algolia
      appId: 'YOUR_APP_ID',

      // Public API key: it is safe to commit it
      apiKey: 'YOUR_SEARCH_API_KEY',

      indexName: 'YOUR_INDEX_NAME',

      // Optional: see doc section below
      contextualSearch: true,

      // Optional: Specify domains where the navigation should occur through window.location instead on history.push. Useful when our Algolia config crawls multiple documentation sites and we want to navigate with window.location.href to them.
      externalUrlRegex: 'external\\.com|domain\\.com',

      // Optional: Replace parts of the item URLs from Algolia. Useful when using the same search index for multiple deployments using a different baseUrl. You can use regexp or string in the `from` param. For example: localhost:3000 vs myCompany.com/docs
      replaceSearchResultPathname: {
        from: '/docs/', // or as RegExp: /\/docs\//
        to: '/',
      },

      // Optional: Algolia search parameters
      searchParameters: {},

      // Optional: path for search page that enabled by default (`false` to disable it)
      searchPagePath: 'search',

      // Optional: whether the insights feature is enabled or not on Docsearch (`false` by default)
      insights: false,

      //... other Algolia params
    },
    // highlight-end
  },
};
```

:::info

`searchParameters` é¸é …åœ¨ Docusaurus v1 ä¸­åç‚º `algoliaOptions`ã€‚

è«‹åƒé–±å…¶[å®˜æ–¹ DocSearch æ–‡ä»¶](https://docsearch.algolia.com/docs/api#searchparameters)äº†è§£å¯èƒ½çš„åƒæ•¸å€¼ã€‚

:::

:::warning

åœ¨ Algolia çˆ¬å–æ‚¨çš„ç¶²ç«™ä¹‹å‰ï¼Œæœå°‹åŠŸèƒ½å¯èƒ½ç„¡æ³•ç©©å®šé‹ä½œã€‚

è‹¥åœ¨é‡å¤§è®Šæ›´å¾Œæœå°‹åŠŸèƒ½å¤±æ•ˆï¼Œè«‹ä½¿ç”¨ Algolia å„€è¡¨æ¿**è§¸ç™¼æ–°çš„çˆ¬å–ä»»å‹™**ã€‚

:::

### ä¸Šä¸‹æ–‡æœå°‹ {#contextual-search}

Contextual search is **enabled by default**.

It ensures that search results are **relevant to the current language and version**.

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: true,
    },
    // highlight-end
  },
};
```

Let's consider you have 2 docs versions (**v1** and **v2**) and 2 languages (`en` and `fr`).

When browsing v2 docs, it would be odd to return search results for the v1 documentation. Sometimes v1 and v2 docs are quite similar, and you would end up with duplicate search results for the same query (one result per version).

Similarly, when browsing the French site, it would be odd to return search results for the English docs.

To solve this problem, the contextual search feature understands that you are browsing a specific docs version and language, and will create the search query filters dynamically.

- on `/en/docs/v1/myDoc`, search results will only include **English** results for the **v1** docs (+ other unversioned pages)
- on `/fr/docs/v2/myDoc`, search results will only include **French** results for the **v2** docs (+ other unversioned pages)

:::info

When using `contextualSearch: true` (default), the contextual facet filters will be merged with the ones provided with `algolia.searchParameters.facetFilters` .

For specific needs, you can disable `contextualSearch` and define your own `facetFilters`:

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: false,
      searchParameters: {
        facetFilters: ['language:en', ['filter1', 'filter2'], 'filter3'],
      },
    },
    // highlight-end
  },
};
```

Refer to the relevant [Algolia faceting documentation](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/).

:::

### Styling your Algolia search {#styling-your-algolia-search}

By default, DocSearch comes with a fine-tuned theme that was designed for accessibility, making sure that colors and contrasts respect standards.

Still, you can reuse the [Infima CSS variables](styling-layout.mdx#styling-your-site-with-infima) from Docusaurus to style DocSearch by editing the `/src/css/custom.css` file.

```css title="/src/css/custom.css"
[data-theme='light'] .DocSearch {
  /* --docsearch-primary-color: var(--ifm-color-primary); */
  /* --docsearch-text-color: var(--ifm-font-color-base); */
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(94, 100, 112, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-color-secondary-lighter);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-color-secondary);
  --docsearch-searchbox-focus-background: var(--ifm-color-white);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-white);
  /* Footer */
  --docsearch-footer-background: var(--ifm-color-white);
}

[data-theme='dark'] .DocSearch {
  --docsearch-text-color: var(--ifm-font-color-base);
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(47, 55, 69, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-background-color);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-background-color);
  --docsearch-searchbox-focus-background: var(--ifm-color-black);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-emphasis-100);
  /* Footer */
  --docsearch-footer-background: var(--ifm-background-surface-color);
  --docsearch-key-gradient: linear-gradient(
    -26.5deg,
    var(--ifm-color-emphasis-200) 0%,
    var(--ifm-color-emphasis-100) 100%
  );
}
```

### Customizing the Algolia search behavior {#customizing-the-algolia-search-behavior}

Algolia DocSearch supports a [list of options](https://docsearch.algolia.com/docs/api/) that you can pass to the `algolia` field in the `docusaurus.config.js` file.

```js title="docusaurus.config.js"
module.exports = {
  themeConfig: {
    // ...
    algolia: {
      apiKey: 'YOUR_API_KEY',
      indexName: 'YOUR_INDEX_NAME',
      // Options...
    },
  },
};
```

### Editing the Algolia search component {#editing-the-algolia-search-component}

If you prefer to edit the Algolia search React component, [swizzle](swizzling.mdx) the `SearchBar` component in `@docusaurus/theme-search-algolia`:

```bash npm2yarn
npm run swizzle @docusaurus/theme-search-algolia SearchBar
```

### Support {#algolia-support}

The Algolia DocSearch team can help you figure out search problems on your site.

You can contact them by [email](mailto:documentationsearch@algolia.com) or on [Discord](https://discord.gg/tXdr5mP).

Docusaurus also has an `#algolia` channel on [Discord](https://discordapp.com/invite/docusaurus).

## ğŸ‘¥ Using Typesense DocSearch {#using-typesense-docsearch}

[Typesense](https://typesense.org) DocSearch works similar to Algolia DocSearch, except that your website is indexed into a Typesense search cluster.

Typesense is an [open source](https://github.com/typesense/typesense) instant-search engine that you can either:

- [Self-Host](https://typesense.org/docs/latest/guide/install-typesense.html#option-2-local-machine-self-hosting) on your own servers or
- Use the Managed [Typesense Cloud](https://cloud.typesense.org) service.

Similar to Algolia DocSearch, there are two components:

- [typesense-docsearch-scraper](https://github.com/typesense/typesense-docsearch-scraper) - which scrapes your website and indexes the data in your Typesense cluster.
- [docusaurus-theme-search-typesense](https://github.com/typesense/docusaurus-theme-search-typesense) - a search bar UI component to add to your website.

Read a step-by-step walk-through of how to [run typesense-docsearch-scraper here](https://typesense.org/docs/latest/guide/docsearch.html#step-1-set-up-docsearch-scraper) and how to [install the Search Bar in your Docusaurus Site here](https://typesense.org/docs/latest/guide/docsearch.html#option-a-docusaurus-powered-sites).

## ğŸ‘¥ Using Local Search {#using-local-search}

You can use a local search plugin for websites where the search index is small and can be downloaded to your users' browsers when they visit your website.

You'll find a list of community-supported [local search plugins listed here](https://docusaurus.io/community/resources#search).

## ğŸ‘¥ Using your own search {#using-your-own-search}

To use your own search, swizzle the `SearchBar` component in `@docusaurus/theme-classic`

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic SearchBar
```

This will create an `src/themes/SearchBar` file in your project folder. Restart your dev server and edit the component, you will see that Docusaurus uses your own `SearchBar` component now.

**Notes**: You can alternatively [swizzle from Algolia SearchBar](#editing-the-algolia-search-component) and create your own search component from there.
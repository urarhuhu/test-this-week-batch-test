# 發佈流程

讓我們瞭解 Docusaurus 如何處理**版本控制、發佈與重大變更**。

:::info

此主題對於高度客製化的網站尤其重要，這些網站可能在升級時遇到困難。

:::

## 語意化版本控制 {#semantic-versioning}

Docusaurus 採用 `major.minor.patch` 版本編號模式，並遵循[語意化版本規範](https://semver.org/)。

遵循語意化版本控制的重要性在於：

- 只要您僅使用[公開 API](/community/release-process#public-api-surface)，即可**確保次要版本升級的簡易性**
- 符合前端生態系的慣例
- 新主版本是完整記錄重大變更的契機
- 新主/次版本可透過部落格文章宣傳新功能

### 主版本 {#major-versions}

**每次重大變更**都會遞增 `major` 版本號。

每當新主版本發佈時，我們會提供：

- 一篇部落格文章，包含功能亮點、主要錯誤修復、**重大變更與升級指引**
- 完整的變更日誌條目

:::tip

請參閱我們的[公開 API 範圍](#public-api-surface)章節，以明確瞭解我們認定的重大變更範疇。

:::

### 次版本 {#minor-versions}

每次向後相容的重要變更都會遞增 `minor` 版本號。

每當新次版本發佈時，我們會提供：

- 一篇列出功能亮點與主要錯誤修復的部落格文章
- 完整的變更日誌條目

:::tip

若您僅使用我們的[公開 API 範圍](#public-api-surface)，升級過程理應迅速完成！

:::

### 修補版本 {#patch-versions}

錯誤修正版本會遞增 `patch` 版本號。

每當新修補版本發佈時，我們會提供：

- 完整的變更日誌條目

## 版本 {#versions}

```mdx-code-block
import {
  CurrentMajorVersionNumber,
  StableMajorBranchLink,
  MainBranchLink,
} from "@site/src/components/Versions";
```

Docusaurus 團隊採用簡化的開發流程，同一時間僅專注於單一主版本與單一 Git 分支：

- **Docusaurus {CurrentMajorVersionNumber}**：位於 <MainBranchLink/> 分支的**穩定**版本。

:::note[下個版本的發佈方式]

當我們準備發佈 **Docusaurus {CurrentMajorVersionNumber + 1}** 時，將：

- 建立 <StableMajorBranchLink/> 分支
- 將重大變更合併至 <MainBranchLink/> 分支
- 直接從 <MainBranchLink/> 分支發佈新版本

:::

:::warning[安全性修復政策]

新穩定版本發佈後，前一個穩定版本將持續獲得**重大安全性問題**的支援，為期**3個月**。

實務上，我們會將安全性修復反向移植至 <StableMajorBranchLink/> 分支。除此之外，所有功能將凍結且非關鍵錯誤不予修復。

建議在此時間範圍內升級至新穩定版本。

:::

## 公開 API 範圍 {#public-api-surface}

Docusaurus 承諾遵循語意化版本控制。這意味著當 Docusaurus 公開 API 發生變更並破壞向後相容性時，我們將遞增 `major` 版本號。

:::tip

Docusaurus 保證公開 API 在 `minor` 版本間的向後相容性。除非您使用內部 API，否則 `minor` 版本升級應相當簡易。

:::

我們將概述哪些內容屬於公開 API 範圍。

### 核心公開 API {#core-public-api}

✅ 我們的公開 API 包含：

- Docusaurus 配置
- Docusaurus 客戶端 API
- Docusaurus CLI
- 預設選項
- 插件選項
- 插件生命週期 API
- 主題配置
- 核心插件路由元件屬性
- `@docusaurus/types` TypeScript 類型
  - 我們仍保留加強類型限制的自由（這可能會導致類型檢查失敗）。

❌ 我們的公開 API **不包含**：

- Docusaurus 配置中的 `future` 選項
- 所有以 `experimental_` 或 `unstable_` 為前綴的功能
- 所有以 `v<MajorVersion>_` 為前綴的功能（例如 `v6_`、`v7_` 等）

:::tip

對於非主題 API，任何有文檔記錄的 API 都視為公開（且會保持穩定）；任何未記錄的 API 都視為內部 API。

:::

API 的「穩定」意味著當您僅升級 Docusaurus 的修訂版或次版本號，且未進行其他變更時，執行 `docusaurus start` 或 `docusaurus build` 不應拋出錯誤。

### 主題公開 API {#theming-public-api}

Docusaurus 擁有非常靈活的主題系統：

- 您可以使用自訂 CSS
- 您可以[替換](/docs/swizzling)任何 React 主題元件

此系統也隱含地創造了非常龐大的 API 介面。為了能夠快速迭代並改進 Docusaurus，我們無法保證向後兼容性。

✅ 我們的主題公開 API 包含：

- [主題類別名稱](/docs/styling-layout#theme-class-names)
- [Infima](/docs/styling-layout#styling-your-site-with-infima) 類別名稱與 CSS 變數
- 可安全替換的 [React 元件](/docs/swizzling#what-is-safe-to-swizzle)
- 主題使用者體驗
- 瀏覽器支援

:::tip

您可能無法透過此公開 API 實現網站的所有自訂需求。

若遇到此情況，請[提交您的自訂使用案例](https://github.com/facebook/docusaurus/discussions/5468)，我們將研究如何擴展公開 API。

:::

❌ 我們的主題公開 API **不包含**：

- DOM 結構
- 帶有哈希後綴的 CSS 模組類別名稱（通常透過 `[class*='myClassName']` 選擇器定位）
- [不安全或禁止替換](/docs/swizzling#what-is-safe-to-swizzle)的 React 元件
- 從 `@docusaurus/theme-common/internal` 導入的 React 元件
- 主題的精確視覺外觀

:::note

當[替換](/docs/swizzling)安全元件時，您可能會遇到從 `@docusaurus/theme-common`（不含 `/internal` 子路徑）導入未記錄 API 的元件。

我們仍會保持這些 API 的向後兼容性（因此標記為「安全」），但不鼓勵直接使用。

:::
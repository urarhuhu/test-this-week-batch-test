# Canary 版本

```mdx-code-block
import {
  VersionsProvider,
  CanaryVersion,
  StableVersion,
  InsertIfCanaryVersionUnknown,
  InsertIfCanaryVersionKnown,
  PackageJSONDiff,
  PublishTime,
} from "@site/src/components/Versions";

<VersionsProvider>
```

Docusaurus 設有 Canary 版本發佈系統。

此系統允許您在拉取請求合併後，立即**測試尚未發佈的新功能**。

這是**向維護者提供反饋**的良好方式，可確保新實現的功能按預期運作。

:::note

在生產環境使用 Canary 版本看似有風險，但實際上並非如此。

Canary 版本已通過所有自動化測試，且 Docusaurus 官方網站本身也在生產環境中使用。

:::

```mdx-code-block
<InsertIfCanaryVersionUnknown>
```

:::warning

下方顯示的 Canary 版本**可能並非最新**。請前往 [npm 頁面](https://www.npmjs.com/package/@docusaurus/core?activeTab=versions)查詢實際版本名稱。

:::

```mdx-code-block
</InsertIfCanaryVersionUnknown>
<InsertIfCanaryVersionKnown>
```

:::tip

下方顯示的 Canary 版本直接從 npm 獲取，**為最新版本**。您可直接在 package.json 中使用這些版本號。

:::

```mdx-code-block
</InsertIfCanaryVersionKnown>
```

## Canary npm 分發標籤

對於 `main` 分支上的任何程式碼相關提交，持續整合系統會將 Canary 版本發佈至 `@canary` npm 分發標籤下。此過程通常需時不超過 10 分鐘。

您可在 [npm](https://www.npmjs.com/package/@docusaurus/core?activeTab=versions) 查看當前分發標籤：

- `latest`: 穩定版本 (當前: <StableVersion />)
- `canary`: Canary 版本 (<CanaryVersion />)

:::tip

請確保使用最新的 Canary 版本並檢查發佈日期（有時發佈過程可能失敗）。<PublishTime />

:::

:::note

Canary 版本遵循 `0.0.0-commitNumber` 命名慣例。

:::

## 使用 Canary 版本

請從 [canary npm 分發標籤](https://www.npmjs.com/package/@docusaurus/core?activeTab=versions) 取得最新版本 (<CanaryVersion />)。

在您的 `package.json` 中為所有 `@docusaurus/*` 相依套件使用此版本：

```mdx-code-block
<PackageJSONDiff />
```

接著重新安裝相依套件並啟動您的網站：

```bash npm2yarn
npm install
npm start
```

您亦可透過命令列升級 `@docusaurus/*` 套件：

```bash npm2yarn
npm install --save-exact @docusaurus/core@canary @docusaurus/preset-classic@canary
```

:::warning

請確保包含所有 `@docusaurus/*` 套件。

對於 Canary 版本，建議使用確切版本號而非語意化版本範圍（避免使用 `^` 前綴）。

:::

```mdx-code-block
</VersionsProvider>
```
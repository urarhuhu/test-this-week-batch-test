{
  "source_file_path_relative_to_docusaurus_root": "versioned_docs/version-0.70/profile-hermes.md",
  "source_file_content_hash": "c0b79f5edb4a98ec7970c5bd31e49c9a0ac82a6c3887855f316e365112f014a4",
  "segments": [
    {
      "segment_id": "58cfcc64",
      "source_content": "---\nid: profile-hermes\ntitle: Profiling with Hermes\n---",
      "source_content_hash": "9f74a0b22a80ceca38671fee4883f321a749c21f8ec1a60d88ee03457486d0b6",
      "node_type": "yaml",
      "translatable": false,
      "translations": {
        "zh-hant": "@@untranslatable_placeholder_58cfcc64"
      }
    },
    {
      "segment_id": "bb42506b",
      "source_content": "You can visualize JavaScript's performance in a React Native app using [Hermes](https://github.com/facebook/hermes). Hermes is a small and lightweight JavaScript engine optimized for running React Native (you can [read more about using it with React Native here](hermes)). Hermes helps improve app performance and also exposes ways to analyze the performance of the JavaScript that it runs.",
      "source_content_hash": "888d56978e9bb2f67326c0ccbc565423446ea35bf99d517be2b9742822effc8b",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-hant": "您可以使用 [Hermes](https://github.com/facebook/hermes) 來視覺化 React Native 應用程式中 JavaScript 的效能表現。Hermes 是一個輕量級的 JavaScript 引擎，專為運行 React Native 而優化（您可[在此閱讀更多關於與 React Native 搭配使用的資訊](hermes)）。Hermes 能提升應用程式效能，並提供分析其所運行 JavaScript 效能的方法。"
      }
    },
    {
      "segment_id": "3fbbcc07",
      "source_content": "In this section, you will learn how to profile your React Native app running on Hermes and how to visualize the profile using [the Performance tab on Chrome DevTools](https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference)",
      "source_content_hash": "049a52e4543a36c54979a3c1bad8d405fbfb355c540702010ea9fa07887deba2",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-hant": "本節將介紹如何分析運行於 Hermes 上的 React Native 應用程式，以及如何使用 [Chrome DevTools 的 Performance 分頁](https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference) 來視覺化分析結果。"
      }
    },
    {
      "segment_id": "6cae1da3",
      "source_content": ":::caution\nBe sure to [enable Hermes in your app](hermes) before you get started!\n:::",
      "source_content_hash": "8a6a4e52fec4c9c9ccfd33042b8c928eb695d842ac83c0b8b091896b74450df4",
      "node_type": "containerDirective",
      "translatable": true,
      "translations": {
        "zh-hant": ":::caution\n開始前請務必[在您的應用程式中啟用 Hermes](hermes)！\n:::"
      }
    },
    {
      "segment_id": "ad8fd492",
      "source_content": "Follow the instructions below to get started profiling:",
      "source_content_hash": "1da64f2bed7922599bfbda174505581a7f24c68a18d549fab205a69bc159a2fa",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-hant": "請按照以下指示開始進行效能分析："
      }
    },
    {
      "segment_id": "4ddf6ae7",
      "source_content": "1. [Record a Hermes sampling profile](profile-hermes.md#record-a-hermes-sampling-profile)\n2. [Execute command from CLI](profile-hermes.md#execute-command-from-cli)\n3. [Open the downloaded profile on Chrome DevTools](profile-hermes.md#open-the-downloaded-profile-on-chrome-devtools)",
      "source_content_hash": "6ed43bce5717f946e00a77880c3a6bf05d7c0a77c2941ca1a2168fba8ff0d76d",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "zh-hant": "1. [記錄 Hermes 取樣分析檔](profile-hermes.md#record-a-hermes-sampling-profile)\n2. [從 CLI 執行指令](profile-hermes.md#execute-command-from-cli)\n3. [在 Chrome DevTools 中開啟下載的分析檔](profile-hermes.md#open-the-downloaded-profile-on-chrome-devtools)"
      }
    },
    {
      "segment_id": "bc633244",
      "source_content": "## Record a Hermes sampling profile",
      "source_content_hash": "c1ee9ca9d0883fa2a979f68180c3e2efbc5ae8dc984b3c34b395a3dd4f41d6a9",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-hant": "## 記錄 Hermes 取樣分析檔"
      }
    },
    {
      "segment_id": "2df4f75f",
      "source_content": "To record a sampling profiler from the Developer Menu:",
      "source_content_hash": "29d1b0e933a3db8558707bab8ba24062d5cb5c4b1545fffd6f2a9070be88b885",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-hant": "要從開發者選單記錄取樣分析器："
      }
    },
    {
      "segment_id": "8cf6d045",
      "source_content": "1. Navigate to your running Metro server terminal.\n2. Press `d` to open the **Developer Menu.**\n3. Select **Enable Sampling Profiler.**\n4. Execute your JavaScript by in your app (press buttons, etc.)\n5. Open the **Developer Menu** by pressing `d` again.\n6. Select **Disable Sampling Profiler** to stop recording and save the sampling profiler.",
      "source_content_hash": "2254c3a685e8957ae36abbef258d1e27b1ac522cb32657a44e0c5cfb05258ed1",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "zh-hant": "1. 導航至正在運行的 Metro 伺服器終端機。\n2. 按下 `d` 開啟**開發者選單**。\n3. 選擇**啟用取樣分析器**。\n4. 在應用程式中執行您的 JavaScript（例如按鈕操作等）。\n5. 再次按下 `d` 開啟**開發者選單**。\n6. 選擇**停用取樣分析器**以停止記錄並儲存取樣分析器。"
      }
    },
    {
      "segment_id": "dfe931a2",
      "source_content": "A toast will show the location where the sampling profiler has been saved, usually in `/data/user/0/com.appName/cache/*.cpuprofile`",
      "source_content_hash": "ea99a792e4287123e2c9cec6ab7cbbeaf0b9683499346f1172282554197a64fb",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-hant": "系統會顯示提示訊息，指出取樣分析器的儲存位置，通常位於 `/data/user/0/com.appName/cache/*.cpuprofile`。"
      }
    },
    {
      "segment_id": "2a70bec8",
      "source_content": "<img src=\"/docs/assets/HermesProfileSaved.png\" height=\"465\" width=\"250\" alt=\"Toast Notification of Profile saving\" />",
      "source_content_hash": "8d4026e8aaa06694a9ad4b09f9cfa905428ca8620161fd58f62cf264ede73354",
      "node_type": "mdxJsxFlowElement",
      "translatable": false,
      "translations": {
        "zh-hant": "@@untranslatable_placeholder_2a70bec8"
      }
    },
    {
      "segment_id": "f422383e",
      "source_content": "## Execute command from CLI",
      "source_content_hash": "203374133839e3974d6da7df88c95d4a5147b641c0215be3ea27babcb1881ef0",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-hant": "## 從 CLI 執行指令"
      }
    },
    {
      "segment_id": "97ae4a01",
      "source_content": "You can use the [React Native CLI](https://github.com/react-native-community/cli) to convert the Hermes tracing profile to Chrome tracing profile, and then pull it to your local machine using:",
      "source_content_hash": "0cc2922b90cb7756a5854df055d56011e1e38c2fccdd96088b65fdd6cf8b6e2a",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-hant": "您可使用 [React Native CLI](https://github.com/react-native-community/cli) 將 Hermes 追蹤分析檔轉換為 Chrome 追蹤分析檔，並透過以下指令將其拉取至本地機器："
      }
    },
    {
      "segment_id": "de8f60af",
      "source_content": "```sh\nnpx react-native profile-hermes [destinationDir]\n```",
      "source_content_hash": "61a4780a96ff37d8f911afac261ea0a692895fcf43b6c6c76ba6caa0b0725166",
      "node_type": "code",
      "translatable": false,
      "translations": {
        "zh-hant": "@@untranslatable_placeholder_de8f60af"
      }
    },
    {
      "segment_id": "06c0f776",
      "source_content": "### Enabling source map",
      "source_content_hash": "d1961002edbe3e45d0acf4af07934a368133dff233b9cc32d2deff340c3a31bb",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-hant": "### 啟用原始碼映射"
      }
    },
    {
      "segment_id": "aa1e7006",
      "source_content": "A source map is used to enhance the profile and associate trace events with the application code. You can automatically generate a source map when converting the Hermes tracing profile to a Chrome tracing profile by enabling `bundleInDebug` if the app is running in development mode. This allows React Native to build the bundle during its running process. Here's how:",
      "source_content_hash": "a61d0f99d00852f38273895eb46ab51807505632039e75aab5ccd8690e3ea904",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-hant": "原始碼映射用於增強分析檔，並將追蹤事件與應用程式碼關聯。若應用程式處於開發模式，您可透過啟用 `bundleInDebug` 在將 Hermes 追蹤分析檔轉換為 Chrome 追蹤分析檔時自動產生原始碼映射。這讓 React Native 能在運行過程中建置套件。方法如下："
      }
    },
    {
      "segment_id": "b93ddfac",
      "source_content": "1. In your app's `android/app/build.gradle` file, add:",
      "source_content_hash": "27f7b280545b834de452eb8269c4ba522059cd82ee774809c18ff004d504b8b8",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "zh-hant": "1. 在應用程式的 `android/app/build.gradle` 檔案中新增："
      }
    },
    {
      "segment_id": "229d6705",
      "source_content": "```groovy\nproject.ext.react = [\n  bundleInDebug: true,\n]\n```",
      "source_content_hash": "652d8c7208a62b47b04016692e4a893d95889a11cbacbac47157f869114c18ce",
      "node_type": "code",
      "translatable": false,
      "translations": {
        "zh-hant": "@@untranslatable_placeholder_229d6705"
      }
    },
    {
      "segment_id": "7fc18c94",
      "source_content": ":::info\nBe sure to clean the build whenever you make any changes to `build.gradle`\n:::",
      "source_content_hash": "8b60aa1bd15d6e5e3c449b424196424f7a91c4d80d0b2ac0e931eef039a2bf9c",
      "node_type": "containerDirective",
      "translatable": true,
      "translations": {
        "zh-hant": ":::info\n請注意，每當您對 `build.gradle` 進行任何變更時，務必清理建置。\n:::"
      }
    },
    {
      "segment_id": "30193704",
      "source_content": "2. Clean the build by running:",
      "source_content_hash": "d0a35fd12fe225d1417bb5093e014bf09eb6307c735f5e241071356fe0e70256",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "zh-hant": "2. 執行以下指令清理建置："
      }
    },
    {
      "segment_id": "c05ad55e",
      "source_content": "```sh\ncd android && ./gradlew clean\n```",
      "source_content_hash": "afb135ef063ec0b473d7e7418b6a58450707a9858c341d2ca055909ce9c2673c",
      "node_type": "code",
      "translatable": false,
      "translations": {
        "zh-hant": "@@untranslatable_placeholder_c05ad55e"
      }
    },
    {
      "segment_id": "35f6931b",
      "source_content": "3. Run your app:",
      "source_content_hash": "c5cf3529ff85851674fbf134b1a88b12ed9ac48f40d80697adf422bf2ec3ab99",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "zh-hant": "3. 運行您的應用程式："
      }
    },
    {
      "segment_id": "1d510af2",
      "source_content": "```sh\nnpx react-native run-android\n```",
      "source_content_hash": "4a5d9625b80da8750f7695687a1ae7162ca8291d13e1a04eb8b45d4939a3e8b9",
      "node_type": "code",
      "translatable": false,
      "translations": {
        "zh-hant": "@@untranslatable_placeholder_1d510af2"
      }
    },
    {
      "segment_id": "52388877",
      "source_content": "### Common errors",
      "source_content_hash": "f4c78f176675dde0cbfb273b750f362ab437ad5c9af5f0f35e4f6213cff5df7f",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-hant": "### 常見錯誤"
      }
    },
    {
      "segment_id": "d422fb13",
      "source_content": "#### `adb: no devices/emulators found` or `adb: device offline`",
      "source_content_hash": "add8d1f5c78e917e661c99c2f74c2d548a3770433e6757c48bbe50a7d0979d89",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-hant": "#### `adb: no devices/emulators found` 或 `adb: device offline`"
      }
    },
    {
      "segment_id": "aa0bd54f",
      "source_content": "- **Why this happens** The CLI cannot access the device or emulator (through adb) you are using to run the app.\n- **How to fix** Make sure your Android device/emulator is connected and running. The command only works when it can access adb.",
      "source_content_hash": "ba26ae4d9893ebb606741ab328ed299387679c412f55df5bcd4c8edbed2774aa",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "zh-hant": "- **發生原因** CLI 無法存取您用來運行應用程式的裝置或模擬器（透過 adb）。\n- **解決方法** 確認您的 Android 裝置/模擬器已連接且正在運行。指令僅在能存取 adb 時有效。"
      }
    },
    {
      "segment_id": "98355e36",
      "source_content": "#### `There is no file in the cache/ directory`",
      "source_content_hash": "56fab935ff55f7d934a2e4a11189c9f2ea2d2ab5a1149c66f38c8b88dab3daf0",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-hant": "#### `There is no file in the cache/ directory`"
      }
    },
    {
      "segment_id": "ca1573da",
      "source_content": "- **Why this happens** The CLI cannot find any **.cpuprofile** file in your app's **cache/** directory. You might have forgotten to record a profile from the device.\n- **How to fix** Follow the [instructions](profile-hermes.md#record-a-hermes-sampling-profile) to enable/disable profiler from device.",
      "source_content_hash": "e0221f59ecf5f36844932e8bc2a93f6759b9d9e1c80c2318285db16d6532ba05",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "zh-hant": "- **發生原因** CLI 在應用程式的 **cache/** 目錄中找不到任何 **.cpuprofile** 檔案。您可能忘記從裝置記錄分析檔。\n- **解決方法** 請遵循[指示](profile-hermes.md#record-a-hermes-sampling-profile)從裝置啟用/停用分析器。"
      }
    },
    {
      "segment_id": "66819c78",
      "source_content": "#### `Error: your_profile_name.cpuprofile is an empty file`",
      "source_content_hash": "fb57cc14db0476ef55b46d8345d4e0b962df9bcd6773093107dcce5fea9e46d7",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-hant": "#### `Error: your_profile_name.cpuprofile is an empty file`"
      }
    },
    {
      "segment_id": "5dbc17cf",
      "source_content": "- **Why this happens** The profile is empty, it might be because Hermes is not running correctly.\n- **How to fix** Make sure your app is running on the latest version of Hermes.",
      "source_content_hash": "6d893c26c658bf92fc7b4a25d9e5fa9be690e24ed127dfd1ec31aac9c6fa1e1d",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "zh-hant": "- **發生原因** 分析檔為空，可能是因為 Hermes 未正確運行。\n- **解決方法** 確認您的應用程式運行於最新版本的 Hermes。"
      }
    },
    {
      "segment_id": "2e771fd0",
      "source_content": "## Open the downloaded profile in Chrome DevTools",
      "source_content_hash": "f2521c3c4daeeb54828463ebf32f859107755afdc4a980cd13880cf5c67b5fd4",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "0750bfa1",
      "source_content": "To open the profile in Chrome DevTools:",
      "source_content_hash": "10692335583ca7370de777e1d8f8aba95077a1ba809d48e1eb021421b7ac22ab",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "2fc7ec55",
      "source_content": "1. Open Chrome DevTools.\n2. Select the **Performance** tab.\n3. Right click and choose **Load profile...**",
      "source_content_hash": "258f8eaf7480c6da15b39fb57e57f4268f158a28e1cc48f7846eee1102b6ad41",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "2fb90ce3",
      "source_content": "<img src=\"/docs/assets/openChromeProfile.png\" alt=\"Loading a performance profile on Chrome DevTools\" />",
      "source_content_hash": "152c8c43732dee4180e6a3ec28f7b3bc8bf411caf74564d97806641cf9d5f5db",
      "node_type": "mdxJsxFlowElement",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "f8edb6d2",
      "source_content": "## How does the Hermes Profile Transformer work?",
      "source_content_hash": "aa15bb222cf498279058eb641c81bcee69ce30494f4ae35e50a3fcc88e499243",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "1862c5fe",
      "source_content": "The Hermes Sample Profile is of the `JSON object format`, while the format that Google's DevTools supports is `JSON Array Format`. (More information about the formats can be found on the [Trace Event Format Document](https://docs.google.com/document/d/1CvAClvFfyA5R-PhYUmn5OOQtYMH4h6I0nSsKchNAySU/preview))",
      "source_content_hash": "1520eceb4fca1e046d92d0b899e60a140c5c6c1425c0552102cc7cb91e5d777c",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "a476a172",
      "source_content": "```ts\nexport interface HermesCPUProfile {\n  traceEvents: SharedEventProperties[];\n  samples: HermesSample[];\n  stackFrames: {[key in string]: HermesStackFrame};\n}\n```",
      "source_content_hash": "363cc7dd916284592a46f550184536307c457e045bdb55dc1d6cb5f3306ccc7f",
      "node_type": "code",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "a81544fd",
      "source_content": "The Hermes profile has most of its information encoded into the `samples` and `stackFrames` properties. Each sample is a snapshot of the function call stack at that particular timestamp as each sample has a `sf` property which corresponds to a function call.",
      "source_content_hash": "db0bc89e3ccd3222c87b1c464f80dce16f88e0a092ca481c18e9c51c5e4ef2f8",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "03a9ab41",
      "source_content": "```ts\nexport interface HermesSample {\n  cpu: string;\n  name: string;\n  ts: string;\n  pid: number;\n  tid: string;\n  weight: string;\n  /**\n   * Will refer to an element in the stackFrames object of the Hermes Profile\n   */\n  sf: number;\n  stackFrameData?: HermesStackFrame;\n}\n```",
      "source_content_hash": "9b7b6df535eecf794c154f894008d4001298be95d863a38ca34afd8994dda306",
      "node_type": "code",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "6fc234cf",
      "source_content": "The information about a function call can be found in `stackFrames` which contains key-object pairs, where the key is the `sf` number and the corresponding object gives us all the relevant information about the function including the `sf` number of its parent function. This parent-child relationship can be traced upwards to find the information of all the functions running at a particular timestamp.",
      "source_content_hash": "a0a30e61f6c9540a5a96a2ba996279ed7b653a781b9b2fd81e43d33a3fa373a3",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "a3a1b8eb",
      "source_content": "```ts\nexport interface HermesStackFrame {\n  line: string;\n  column: string;\n  funcLine: string;\n  funcColumn: string;\n  name: string;\n  category: string;\n  /**\n   * A parent function may or may not exist\n   */\n  parent?: number;\n}\n```",
      "source_content_hash": "3b84155ba8f15bd062a52b490b70f85c35d443e7680ba376a8cb294128a6541b",
      "node_type": "code",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "9e90a9b3",
      "source_content": "At this point, you should define a few more terms, namely:",
      "source_content_hash": "ddc10fac78b0fb3b09f3c7b9a82b3d94b7003f181945d544ff2eb006037e6e0a",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "d3939446",
      "source_content": "1. Nodes: The objects corresponding to `sf` numbers in `stackFrames`\n2. Active Nodes: The nodes which are currently running at a particular timestamp. A node is classified as running if its `sf` number is in the function call stack. This call stack can be obtained from the `sf` number of the sample and tracing upwards till parent `sf`s are available",
      "source_content_hash": "ac96aa81de603ca2ce0ea3803ac820488318d1af1f600cc0c33d9058a353133a",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "17b50e81",
      "source_content": "The `samples` and the `stackFrames` in tandem can then be used to generate all the start and end events at the corresponding timestamps, wherein:",
      "source_content_hash": "545fb850ab1568acd32b4d7a775dc71abb2ace0a790d35bd48ca9b2c6a8c49fd",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "f4e38e16",
      "source_content": "1. Start Nodes/Events: Nodes absent in the previous sample's function call stack but present in the current sample's.\n2. End Nodes/Events: Nodes present in the previous sample's function call stack but absent in the current sample's.",
      "source_content_hash": "aabde9d0399e6effc74f70c1c535f457e4d326e6dff0512c2f2e6e5f61de759f",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "dc9a6065",
      "source_content": "<img src=\"/docs/assets/CallStackDemo.jpg\" height=\"800\" width=\"600\" alt=\"CallStack Terms Explained\" />",
      "source_content_hash": "24dc510ef3035fc084ed19b56bd0580a53f15f43720d0eb488baefe73d50d357",
      "node_type": "mdxJsxFlowElement",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "63565425",
      "source_content": "You can now construct a `flamechart` of function calls as you have all the function information including its start and end timestamps.",
      "source_content_hash": "5b59688c05cfd7ede28b49e75d2ee4f13fd4cc5836feeb9dd0fd6d7ea4f4872e",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "1496ef51",
      "source_content": "The `hermes-profile-transformer` can convert any profile generated using Hermes into a format that can be directly displayed in Chrome DevTools. More information about this can be found on [ `@react-native-community/hermes-profile-transformer` ](https://github.com/react-native-community/hermes-profile-transformer)",
      "source_content_hash": "3a632aa81ad9c8e6669c56d0fed5fdc2dd33f7ff0315942df2d0494041fc26b9",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    }
  ],
  "target_i18n_subpath": "docusaurus-plugin-content-docs/version-0.70/profile-hermes.md",
  "last_updated_timestamp": "2025-06-18T10:03:59.326977+00:00",
  "schema_version": "1.0",
  "translated_versions": {
    "zh-hant": "c0b79f5edb4a98ec7970c5bd31e49c9a0ac82a6c3887855f316e365112f014a4"
  }
}
{
  "source_file_path_relative_to_docusaurus_root": "versioned_docs/version-0.72/profile-hermes.md",
  "source_file_content_hash": "6784e9b8dd11637e0b373200a10d48b658532c85a39d72ef259ec499d355fa54",
  "segments": [
    {
      "segment_id": "58cfcc64",
      "source_content": "---\nid: profile-hermes\ntitle: Profiling with Hermes\n---",
      "source_content_hash": "9f74a0b22a80ceca38671fee4883f321a749c21f8ec1a60d88ee03457486d0b6",
      "node_type": "yaml",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "bb42506b",
      "source_content": "You can visualize JavaScript's performance in a React Native app using [Hermes](https://github.com/facebook/hermes). Hermes is a small and lightweight JavaScript engine optimized for running React Native (you can [read more about using it with React Native here](hermes)). Hermes helps improve app performance and also exposes ways to analyze the performance of the JavaScript that it runs.",
      "source_content_hash": "888d56978e9bb2f67326c0ccbc565423446ea35bf99d517be2b9742822effc8b",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "3fbbcc07",
      "source_content": "In this section, you will learn how to profile your React Native app running on Hermes and how to visualize the profile using [the Performance tab on Chrome DevTools](https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference)",
      "source_content_hash": "049a52e4543a36c54979a3c1bad8d405fbfb355c540702010ea9fa07887deba2",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "6cae1da3",
      "source_content": ":::caution\nBe sure to [enable Hermes in your app](hermes) before you get started!\n:::",
      "source_content_hash": "8a6a4e52fec4c9c9ccfd33042b8c928eb695d842ac83c0b8b091896b74450df4",
      "node_type": "containerDirective",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "ad8fd492",
      "source_content": "Follow the instructions below to get started profiling:",
      "source_content_hash": "1da64f2bed7922599bfbda174505581a7f24c68a18d549fab205a69bc159a2fa",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "4ddf6ae7",
      "source_content": "1. [Record a Hermes sampling profile](profile-hermes.md#record-a-hermes-sampling-profile)\n2. [Execute command from CLI](profile-hermes.md#execute-command-from-cli)\n3. [Open the downloaded profile on Chrome DevTools](profile-hermes.md#open-the-downloaded-profile-on-chrome-devtools)",
      "source_content_hash": "6ed43bce5717f946e00a77880c3a6bf05d7c0a77c2941ca1a2168fba8ff0d76d",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "bc633244",
      "source_content": "## Record a Hermes sampling profile",
      "source_content_hash": "c1ee9ca9d0883fa2a979f68180c3e2efbc5ae8dc984b3c34b395a3dd4f41d6a9",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "2df4f75f",
      "source_content": "To record a sampling profiler from the Dev Menu:",
      "source_content_hash": "6b7e46f940f2ab05f16ceb51bd66fc4928cb244065e43f431efa0239b033ae69",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "8cf6d045",
      "source_content": "1. Navigate to your running Metro server terminal.\n2. Press `d` to open the **Dev Menu.**\n3. Select **Enable Sampling Profiler.**\n4. Execute your JavaScript by in your app (press buttons, etc.)\n5. Open the **Dev Menu** by pressing `d` again.\n6. Select **Disable Sampling Profiler** to stop recording and save the sampling profiler.",
      "source_content_hash": "efae4597956d6649c37d44bdff3a1911a60a5d68decc9cb528dfe4c147ba4667",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "dfe931a2",
      "source_content": "A toast will show the location where the sampling profiler has been saved, usually in `/data/user/0/com.appName/cache/*.cpuprofile`",
      "source_content_hash": "ea99a792e4287123e2c9cec6ab7cbbeaf0b9683499346f1172282554197a64fb",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "2a70bec8",
      "source_content": "<img src=\"/docs/assets/HermesProfileSaved.png\" height=\"465\" width=\"250\" alt=\"Toast Notification of Profile saving\" />",
      "source_content_hash": "8d4026e8aaa06694a9ad4b09f9cfa905428ca8620161fd58f62cf264ede73354",
      "node_type": "mdxJsxFlowElement",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "f422383e",
      "source_content": "## Execute command from CLI",
      "source_content_hash": "203374133839e3974d6da7df88c95d4a5147b641c0215be3ea27babcb1881ef0",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "97ae4a01",
      "source_content": "You can use the [React Native CLI](https://github.com/react-native-community/cli) to convert the Hermes tracing profile to Chrome tracing profile, and then pull it to your local machine using:",
      "source_content_hash": "0cc2922b90cb7756a5854df055d56011e1e38c2fccdd96088b65fdd6cf8b6e2a",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "de8f60af",
      "source_content": "```sh\nnpx react-native profile-hermes [destinationDir]\n```",
      "source_content_hash": "61a4780a96ff37d8f911afac261ea0a692895fcf43b6c6c76ba6caa0b0725166",
      "node_type": "code",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "06c0f776",
      "source_content": "### Enabling source map",
      "source_content_hash": "d1961002edbe3e45d0acf4af07934a368133dff233b9cc32d2deff340c3a31bb",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "6b421e57",
      "source_content": ":::info\nYou may read about source maps on the [source maps](sourcemaps.md) page.\n:::",
      "source_content_hash": "00b86c6a9a86436502b37f339508f2944c864e0a80a769303e67c0b275d41c03",
      "node_type": "containerDirective",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "6f930b2f",
      "source_content": "### Common errors",
      "source_content_hash": "f4c78f176675dde0cbfb273b750f362ab437ad5c9af5f0f35e4f6213cff5df7f",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "11c76fcc",
      "source_content": "#### `adb: no devices/emulators found` or `adb: device offline`",
      "source_content_hash": "add8d1f5c78e917e661c99c2f74c2d548a3770433e6757c48bbe50a7d0979d89",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "310e47b7",
      "source_content": "- **Why this happens** The CLI cannot access the device or emulator (through adb) you are using to run the app.\n- **How to fix** Make sure your Android device/emulator is connected and running. The command only works when it can access adb.",
      "source_content_hash": "ba26ae4d9893ebb606741ab328ed299387679c412f55df5bcd4c8edbed2774aa",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "2c1b51df",
      "source_content": "#### `There is no file in the cache/ directory`",
      "source_content_hash": "56fab935ff55f7d934a2e4a11189c9f2ea2d2ab5a1149c66f38c8b88dab3daf0",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "e3321a43",
      "source_content": "- **Why this happens** The CLI cannot find any **.cpuprofile** file in your app's **cache/** directory. You might have forgotten to record a profile from the device.\n- **How to fix** Follow the [instructions](profile-hermes.md#record-a-hermes-sampling-profile) to enable/disable profiler from device.",
      "source_content_hash": "e0221f59ecf5f36844932e8bc2a93f6759b9d9e1c80c2318285db16d6532ba05",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "e912d935",
      "source_content": "#### `Error: your_profile_name.cpuprofile is an empty file`",
      "source_content_hash": "fb57cc14db0476ef55b46d8345d4e0b962df9bcd6773093107dcce5fea9e46d7",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "ea0c7bae",
      "source_content": "- **Why this happens** The profile is empty, it might be because Hermes is not running correctly.\n- **How to fix** Make sure your app is running on the latest version of Hermes.",
      "source_content_hash": "6d893c26c658bf92fc7b4a25d9e5fa9be690e24ed127dfd1ec31aac9c6fa1e1d",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "8c6d7ee7",
      "source_content": "## Open the downloaded profile in Chrome DevTools",
      "source_content_hash": "f2521c3c4daeeb54828463ebf32f859107755afdc4a980cd13880cf5c67b5fd4",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "06e24cc0",
      "source_content": "To open the profile in Chrome DevTools:",
      "source_content_hash": "10692335583ca7370de777e1d8f8aba95077a1ba809d48e1eb021421b7ac22ab",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "af7d8a35",
      "source_content": "1. Open Chrome DevTools.\n2. Select the **Performance** tab.\n3. Right click and choose **Load profile...**",
      "source_content_hash": "258f8eaf7480c6da15b39fb57e57f4268f158a28e1cc48f7846eee1102b6ad41",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "68209f5c",
      "source_content": "<img src=\"/docs/assets/openChromeProfile.png\" alt=\"Loading a performance profile on Chrome DevTools\" />",
      "source_content_hash": "152c8c43732dee4180e6a3ec28f7b3bc8bf411caf74564d97806641cf9d5f5db",
      "node_type": "mdxJsxFlowElement",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "b051b70c",
      "source_content": "## How does the Hermes Profile Transformer work?",
      "source_content_hash": "aa15bb222cf498279058eb641c81bcee69ce30494f4ae35e50a3fcc88e499243",
      "node_type": "heading",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "d0dd855b",
      "source_content": "The Hermes Sample Profile is of the `JSON object format`, while the format that Google's DevTools supports is `JSON Array Format`. (More information about the formats can be found on the [Trace Event Format Document](https://docs.google.com/document/d/1CvAClvFfyA5R-PhYUmn5OOQtYMH4h6I0nSsKchNAySU/preview))",
      "source_content_hash": "1520eceb4fca1e046d92d0b899e60a140c5c6c1425c0552102cc7cb91e5d777c",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "7b2110d8",
      "source_content": "```ts\nexport interface HermesCPUProfile {\n  traceEvents: SharedEventProperties[];\n  samples: HermesSample[];\n  stackFrames: {[key in string]: HermesStackFrame};\n}\n```",
      "source_content_hash": "363cc7dd916284592a46f550184536307c457e045bdb55dc1d6cb5f3306ccc7f",
      "node_type": "code",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "2547a6bb",
      "source_content": "The Hermes profile has most of its information encoded into the `samples` and `stackFrames` properties. Each sample is a snapshot of the function call stack at that particular timestamp as each sample has a `sf` property which corresponds to a function call.",
      "source_content_hash": "db0bc89e3ccd3222c87b1c464f80dce16f88e0a092ca481c18e9c51c5e4ef2f8",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "7d898a0e",
      "source_content": "```ts\nexport interface HermesSample {\n  cpu: string;\n  name: string;\n  ts: string;\n  pid: number;\n  tid: string;\n  weight: string;\n  /**\n   * Will refer to an element in the stackFrames object of the Hermes Profile\n   */\n  sf: number;\n  stackFrameData?: HermesStackFrame;\n}\n```",
      "source_content_hash": "9b7b6df535eecf794c154f894008d4001298be95d863a38ca34afd8994dda306",
      "node_type": "code",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "c1eaf30b",
      "source_content": "The information about a function call can be found in `stackFrames` which contains key-object pairs, where the key is the `sf` number and the corresponding object gives us all the relevant information about the function including the `sf` number of its parent function. This parent-child relationship can be traced upwards to find the information of all the functions running at a particular timestamp.",
      "source_content_hash": "a0a30e61f6c9540a5a96a2ba996279ed7b653a781b9b2fd81e43d33a3fa373a3",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "c4c0fc07",
      "source_content": "```ts\nexport interface HermesStackFrame {\n  line: string;\n  column: string;\n  funcLine: string;\n  funcColumn: string;\n  name: string;\n  category: string;\n  /**\n   * A parent function may or may not exist\n   */\n  parent?: number;\n}\n```",
      "source_content_hash": "3b84155ba8f15bd062a52b490b70f85c35d443e7680ba376a8cb294128a6541b",
      "node_type": "code",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "a6c928a1",
      "source_content": "At this point, you should define a few more terms, namely:",
      "source_content_hash": "ddc10fac78b0fb3b09f3c7b9a82b3d94b7003f181945d544ff2eb006037e6e0a",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "82abb0a4",
      "source_content": "1. Nodes: The objects corresponding to `sf` numbers in `stackFrames`\n2. Active Nodes: The nodes which are currently running at a particular timestamp. A node is classified as running if its `sf` number is in the function call stack. This call stack can be obtained from the `sf` number of the sample and tracing upwards till parent `sf`s are available",
      "source_content_hash": "ac96aa81de603ca2ce0ea3803ac820488318d1af1f600cc0c33d9058a353133a",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "6fc234cf",
      "source_content": "The `samples` and the `stackFrames` in tandem can then be used to generate all the start and end events at the corresponding timestamps, wherein:",
      "source_content_hash": "545fb850ab1568acd32b4d7a775dc71abb2ace0a790d35bd48ca9b2c6a8c49fd",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "d9b1e67e",
      "source_content": "1. Start Nodes/Events: Nodes absent in the previous sample's function call stack but present in the current sample's.\n2. End Nodes/Events: Nodes present in the previous sample's function call stack but absent in the current sample's.",
      "source_content_hash": "aabde9d0399e6effc74f70c1c535f457e4d326e6dff0512c2f2e6e5f61de759f",
      "node_type": "list",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "cf6a5faa",
      "source_content": "<img src=\"/docs/assets/CallStackDemo.jpg\" height=\"800\" width=\"600\" alt=\"CallStack Terms Explained\" />",
      "source_content_hash": "24dc510ef3035fc084ed19b56bd0580a53f15f43720d0eb488baefe73d50d357",
      "node_type": "mdxJsxFlowElement",
      "translatable": false,
      "translations": {}
    },
    {
      "segment_id": "5c7d994c",
      "source_content": "You can now construct a `flamechart` of function calls as you have all the function information including its start and end timestamps.",
      "source_content_hash": "5b59688c05cfd7ede28b49e75d2ee4f13fd4cc5836feeb9dd0fd6d7ea4f4872e",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    },
    {
      "segment_id": "1ecf0882",
      "source_content": "The `hermes-profile-transformer` can convert any profile generated using Hermes into a format that can be directly displayed in Chrome DevTools. More information about this can be found on [ `@react-native-community/hermes-profile-transformer` ](https://github.com/react-native-community/hermes-profile-transformer)",
      "source_content_hash": "3a632aa81ad9c8e6669c56d0fed5fdc2dd33f7ff0315942df2d0494041fc26b9",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {}
    }
  ],
  "target_i18n_subpath": "docusaurus-plugin-content-docs/version-0.72/profile-hermes.md",
  "last_updated_timestamp": "2025-06-18T09:36:12.751621+00:00",
  "schema_version": "1.0",
  "translated_versions": {}
}